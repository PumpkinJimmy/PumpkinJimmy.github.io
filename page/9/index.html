<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"pumpkinjimmy.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
<meta property="og:type" content="website">
<meta property="og:title" content="BBPumpkin的博客">
<meta property="og:url" content="http://pumpkinjimmy.github.io/page/9/index.html">
<meta property="og:site_name" content="BBPumpkin的博客">
<meta property="og:description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="BBPumpkin">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://pumpkinjimmy.github.io/page/9/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>BBPumpkin的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">BBPumpkin的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/3ceeb655/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/3ceeb655/" class="post-title-link" itemprop="url">HBase 分布式数据库</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-27 09:41:01" itemprop="dateCreated datePublished" datetime="2021-09-27T09:41:01+08:00">2021-09-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="hbase-%E5%88%86%E5%B8%83%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%BA%93" tabindex="-1">HBase 分布式数据库</h1>
<h2 id="nosql%EF%BC%9A%E5%88%97%E6%97%8F%E6%95%B0%E6%8D%AE%E5%BA%93%EF%BC%88%E5%BE%85%E5%AE%8C%E5%96%84%EF%BC%89" tabindex="-1">NoSQL：列族数据库（待完善）</h2>
<h2 id="hbase%E6%9E%B6%E6%9E%84" tabindex="-1">HBase架构</h2>
<h3 id="region" tabindex="-1">Region</h3>
<h3 id="zookeeper" tabindex="-1">Zookeeper</h3>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/5c36621f/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/5c36621f/" class="post-title-link" itemprop="url">HDFS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-27 09:40:52" itemprop="dateCreated datePublished" datetime="2021-09-27T09:40:52+08:00">2021-09-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="hdfs" tabindex="-1">HDFS</h1>
<h2 id="hdfs%E6%9E%B6%E6%9E%84" tabindex="-1">HDFS架构</h2>
<h2 id="hdfs%E5%B8%B8%E7%94%A8shell%E6%8C%87%E4%BB%A4" tabindex="-1">HDFS常用Shell指令</h2>
<p>格式：<code>hdfs dfs -[cmd] [options]</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">hdfs dfs -ls</span><br><span class="line">hdfs dfs -cat</span><br><span class="line">hdfs dfs -mkdir</span><br><span class="line">hdfs dfs -touch</span><br><span class="line">hdfs dfs -rm</span><br><span class="line">hdfs dfs -put # 上传</span><br><span class="line">hdfs dfs -get # 下载</span><br></pre></td></tr></table></figure>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/68260beb/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/68260beb/" class="post-title-link" itemprop="url">高级SQL</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-26 14:50:56" itemprop="dateCreated datePublished" datetime="2021-09-26T14:50:56+08:00">2021-09-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E9%AB%98%E7%BA%A7sql" tabindex="-1">高级SQL</h1>
<h2 id="%E5%88%86%E7%AA%97%EF%BC%88%E5%BE%85%E5%AE%8C%E5%96%84%EF%BC%89" tabindex="-1">分窗（待完善）</h2>
<p>分窗是时间序列分析的常见需求。</p>
<p>语法：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="sql%E8%BF%87%E7%A8%8B%E5%92%8C%E5%87%BD%E6%95%B0%EF%BC%88%E5%BE%85%E5%AE%8C%E5%96%84%EF%BC%89" tabindex="-1">SQL过程和函数（待完善）</h2>
<h2 id="%E8%A7%A6%E5%8F%91%E5%99%A8%EF%BC%88%E5%BE%85%E5%AE%8C%E5%96%84%EF%BC%89" tabindex="-1">触发器（待完善）</h2>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/e5579406/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/e5579406/" class="post-title-link" itemprop="url">GDCPC2021 A An easy problem</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-24 15:59:16" itemprop="dateCreated datePublished" datetime="2021-09-24T15:59:16+08:00">2021-09-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="gdcpc2021-a-an-easy-problem" tabindex="-1">GDCPC2021 A An easy problem</h1>
<p>突破口：</p>
<ul>
<li>网格和搜索空间非常庞大，但第K大的寻找中K取值有限，缩小了搜索空间<br>
知识点：</li>
<li>BFS</li>
<li>Hash去重</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unordered_set&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">long</span> <span class="type">long</span> ll;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">PairHash</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function">ll <span class="title">operator</span><span class="params">()</span><span class="params">(<span class="type">const</span> pair&lt;ll,ll&gt;&amp; p)</span><span class="type">const</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> p.first * <span class="number">1000001</span> + p.second;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n, m, k; <span class="built_in">scanf</span>(<span class="string">&quot;%d%d%d&quot;</span>, &amp;n, &amp;m, &amp;k);</span><br><span class="line">    queue&lt;pair&lt;ll,ll&gt;&gt; q;</span><br><span class="line">    priority_queue&lt;ll, vector&lt;ll&gt;, greater&lt;ll&gt;&gt; heap;</span><br><span class="line">    unordered_set&lt;pair&lt;ll,ll&gt;, PairHash&gt; used;</span><br><span class="line">    q.<span class="built_in">push</span>(<span class="built_in">make_pair</span>(n, m));</span><br><span class="line">    heap.<span class="built_in">push</span>(<span class="built_in">ll</span>(m)*n);</span><br><span class="line">    used.<span class="built_in">insert</span>(<span class="built_in">make_pair</span>(n,m));</span><br><span class="line">    <span class="keyword">while</span> (!q.<span class="built_in">empty</span>())&#123;</span><br><span class="line">        <span class="keyword">auto</span> p = q.<span class="built_in">front</span>(); q.<span class="built_in">pop</span>();</span><br><span class="line"><span class="comment">//           cout &lt;&lt; p.first &lt;&lt; &#x27; &#x27; &lt;&lt; p.second &lt;&lt; endl;</span></span><br><span class="line">        <span class="keyword">if</span> (p.first &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">auto</span> p_nxt = p;</span><br><span class="line">            p_nxt.first--;</span><br><span class="line">            <span class="keyword">if</span> (!used.<span class="built_in">count</span>(p_nxt)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (heap.<span class="built_in">size</span>() &lt; k || p_nxt.first * p_nxt.second &gt; heap.<span class="built_in">top</span>())&#123;</span><br><span class="line">                    <span class="keyword">if</span> (heap.<span class="built_in">size</span>() == k) heap.<span class="built_in">pop</span>();</span><br><span class="line">                    heap.<span class="built_in">push</span>(p_nxt.first * p_nxt.second);</span><br><span class="line">                    q.<span class="built_in">push</span>(p_nxt);</span><br><span class="line">                    used.<span class="built_in">insert</span>(p_nxt);</span><br><span class="line">                    </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (p.second &gt; <span class="number">1</span>)&#123;</span><br><span class="line">            <span class="keyword">auto</span> p_nxt = p;</span><br><span class="line">            p_nxt.second--;</span><br><span class="line">            <span class="keyword">if</span> (!used.<span class="built_in">count</span>(p_nxt))&#123;</span><br><span class="line">                <span class="keyword">if</span> (heap.<span class="built_in">size</span>() &lt; k || p_nxt.first * p_nxt.second &gt; heap.<span class="built_in">top</span>())&#123;</span><br><span class="line">                    <span class="keyword">if</span> (heap.<span class="built_in">size</span>() == k) heap.<span class="built_in">pop</span>();</span><br><span class="line">                    heap.<span class="built_in">push</span>(p_nxt.first * p_nxt.second);</span><br><span class="line">                    q.<span class="built_in">push</span>(p_nxt);</span><br><span class="line">                    used.<span class="built_in">insert</span>(p_nxt);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="comment">//           cout &lt;&lt; heap.top() &lt;&lt; endl;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>, heap.<span class="built_in">top</span>());</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/0/" class="post-title-link" itemprop="url">分布式系统的进程与虚拟化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-24 15:02:14" itemprop="dateCreated datePublished" datetime="2021-09-24T15:02:14+08:00">2021-09-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E5%88%86%E5%B8%83%E5%BC%8F%E7%B3%BB%E7%BB%9F%E7%9A%84%E8%BF%9B%E7%A8%8B%E4%B8%8E%E8%99%9A%E6%8B%9F%E5%8C%96" tabindex="-1">分布式系统的进程与虚拟化</h1>
<h2 id="%E4%B8%8A%E4%B8%8B%E6%96%87" tabindex="-1">上下文</h2>
<ul>
<li>处理器上下文
<ul>
<li>寄存器</li>
</ul>
</li>
<li>线程上下文
<ul>
<li>处理器上下文</li>
<li>TCB</li>
</ul>
</li>
<li>进程上下文
<ul>
<li>PCB
<ul>
<li>处理器上下文</li>
<li>线程上下文</li>
<li>优先级</li>
<li>IO信息</li>
<li>内存指针</li>
<li>MMU（页表指针）</li>
<li>TLB（块表）</li>
<li>记账信息</li>
</ul>
</li>
<li>数据段</li>
<li>代码段</li>
<li>栈</li>
</ul>
</li>
</ul>
<p>容易发现：</p>
<ul>
<li>进程上下文切换开销较大；线程切换开销较小</li>
<li>进程切换通常需要模式切换（使用系统调用）；线程切换不一定要陷入OS</li>
<li>线程之间共享地址空间：
<ul>
<li>一方面，它允许线程之间通过共享变量来通信</li>
<li>另一方面，线程之间共享地址空间可能导致相互干扰，隔离性不如进程</li>
</ul>
</li>
</ul>
<p>更严重的，线程之间隔离性差的问题可能导致<em>旁道攻击</em></p>
<p>上下文切换的开销：</p>
<ul>
<li>直接的：执行切换所需要的处理器时间</li>
<li>间接的：流水线清空，Cache失效、刷新（<strong>实际系统中间接开销才是主要的开销</strong>）</li>
</ul>
<h2 id="%E7%BA%BF%E7%A8%8B%E5%AE%9E%E7%8E%B0" tabindex="-1">线程实现</h2>
<h3 id="%E7%94%A8%E6%88%B7%E7%BA%A7%E7%BA%BF%E7%A8%8B" tabindex="-1">用户级线程</h3>
<p>现在的线程功能通常是用户态库提供<em>用户级线程</em>（如Pthread）。它的切换开销较小。</p>
<h3 id="%E5%86%85%E6%A0%B8%E7%BA%A7%E7%BA%BF%E7%A8%8B" tabindex="-1">内核级线程</h3>
<p>性能一般，但是可以充分利用多核</p>
<h3 id="%E6%B7%B7%E5%90%88" tabindex="-1">混合</h3>
<p>实际上在内核级线程和用户级线程混合使用才是最优的。</p>
<h2 id="%E5%88%86%E5%B8%83%E5%BC%8F%E5%AE%A2%E6%88%B7%E6%9C%BA%2F%E6%9C%8D%E5%8A%A1%E6%9C%BA%E9%80%9A%E4%BF%A1%EF%BC%88%E5%BE%85%E5%AE%8C%E5%96%84%EF%BC%89" tabindex="-1">分布式客户机/服务机通信（待完善）</h2>
<h3 id="%E5%AE%A2%E6%88%B7%E7%AB%AF" tabindex="-1">客户端</h3>
<h3 id="%E6%9C%8D%E5%8A%A1%E7%AB%AF" tabindex="-1">服务端</h3>
<ul>
<li>迭代服务器</li>
<li>并发服务器</li>
</ul>
<h3 id="%E5%B8%A6%E5%A4%96%E9%80%9A%E4%BF%A1" tabindex="-1">带外通信</h3>
<p>带内数据是指应用程序之间的业务通信数据。（参见TCP连接的字节流）</p>
<p>带外数据则是通常字节流之外的额外通信。</p>
<h2 id="%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8E%E7%8A%B6%E6%80%81" tabindex="-1">服务器与状态</h2>
<ul>
<li>无状态服务器</li>
<li>有状态服务器</li>
</ul>
<h3 id="%E6%97%A0%E7%8A%B6%E6%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8" tabindex="-1">无状态服务器</h3>
<p>特点：</p>
<ul>
<li>不记录某一文件是否被打开</li>
<li>不保证客户缓存状态</li>
<li><strong>不追踪客户端状态</strong></li>
</ul>
<p>效果：</p>
<ul>
<li>服务器与客户端完全独立：更可靠，易于调试</li>
<li>由于客户端/服务端的宕机导致的不一致减少了</li>
<li>由于服务器无状态，可能带来性能下降</li>
</ul>
<h3 id="%E6%9C%89%E7%8A%B6%E6%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8" tabindex="-1">有状态服务器</h3>
<p>特点：</p>
<ul>
<li>记录客户端信息</li>
<li>可以预读取</li>
<li>利用缓存提高性能</li>
</ul>
<p>效果：</p>
<ul>
<li>性能非常高</li>
<li>可靠性存在问题</li>
</ul>
<h2 id="%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%9B%86%E7%BE%A4" tabindex="-1">服务器集群</h2>
<ul>
<li>服务器网关
<ul>
<li>分发请求</li>
<li>负载均衡</li>
<li>可能称为整个系统的瓶颈</li>
</ul>
</li>
</ul>
<h3 id="%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E6%96%B9%E6%B3%95" tabindex="-1">负载均衡方法</h3>
<ul>
<li>基于传输层交换的方法：基于机器负载进行分发</li>
<li>基于内容感知的方法：根据内容的类别进行分发（典型的是Web资源走CDN，表单走后端）</li>
<li>混合</li>
</ul>
<h2 id="%E5%B9%BF%E5%9F%9F%E7%BD%91%E6%9C%8D%E5%8A%A1%E9%9B%86%E7%BE%A4%EF%BC%88%E5%BE%85%E5%AE%8C%E5%96%84%EF%BC%89" tabindex="-1">广域网服务集群（待完善）</h2>
<p>一种常见的实现是基于DNS</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/0/" class="post-title-link" itemprop="url">P2P</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-24 14:31:26" itemprop="dateCreated datePublished" datetime="2021-09-24T14:31:26+08:00">2021-09-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="p2p" tabindex="-1">P2P</h1>
<h2 id="%E7%A9%BF%E9%80%8F%E9%97%AE%E9%A2%98" tabindex="-1">穿透问题</h2>
<p>在P2P系统中最显著的问题是<em>防火墙的穿透问题</em>。</p>
<p>典型的PC因特网访问方案：</p>
<ul>
<li>PC位于某个私有网络中</li>
<li>私有网络中存在一个<strong>NAT网关</strong></li>
<li>PC通过NAT网关连接到因特网上</li>
<li>PC默认只能连接持有公网IP的服务器</li>
<li>服务器<strong>通过NAT网关与PC间接通信</strong>，PC的对服务器<strong>不可见</strong></li>
</ul>
<p>在典型的C-S模式中，Server是持有公网IP的，因此NAT网关不成问题。</p>
<p>但在P2P中，<strong>不存在典型的服务器，通信双方的主机可能都在某个私网内，通过NAT网关连接因特网</strong></p>
<p>解决方案是：</p>
<ul>
<li>网关之间交换控制信息</li>
<li>主机之间穿透防火墙直接交换数据信息</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/0/" class="post-title-link" itemprop="url">点云滤波</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-24 11:12:27" itemprop="dateCreated datePublished" datetime="2021-09-24T11:12:27+08:00">2021-09-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E7%82%B9%E4%BA%91%E6%BB%A4%E6%B3%A2" tabindex="-1">点云滤波</h1>
<ul>
<li>直通滤波：直接丢弃给定坐标范围之外的点</li>
<li>离群点去除：以某些标准判定一个点是否是离群点，并移除
<ul>
<li>依据半径：给定一个半径</li>
<li>统计：在邻域内做正态建模，然后移除不符合模型的点</li>
</ul>
</li>
<li>双边滤波（待完善）</li>
<li>体素降采样</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/0/" class="post-title-link" itemprop="url">光栅化</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-24 10:29:25" itemprop="dateCreated datePublished" datetime="2021-09-24T10:29:25+08:00">2021-09-24</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E5%85%89%E6%A0%85%E5%8C%96" tabindex="-1">光栅化</h1>
<h2 id="%E7%9B%B4%E7%BA%BF%E5%85%89%E6%A0%85%E5%8C%96" tabindex="-1">直线光栅化</h2>
<p>朴素算法（也称为DDA算法）非常容易实现：利用直线方程+舍入可以直接求出直线上的离散像素。</p>
<p>但朴素算法涉及了两个非常耗时的操作：</p>
<ul>
<li>浮点数舍入</li>
<li>浮点数除法</li>
</ul>
<p>改进的直线光栅化基于迭代方法，可以避开这两个耗时的操作。</p>
<h3 id="bresenham%E7%AE%97%E6%B3%95" tabindex="-1">Bresenham算法</h3>
<h2 id="%E4%B8%89%E8%A7%92%E5%BD%A2%E5%85%89%E6%A0%85%E5%8C%96" tabindex="-1">三角形光栅化</h2>
<p>归根到底，提高光栅化性能的要点有两个：</p>
<ul>
<li>利用图元的<em>空间连续性</em>，也即图元覆盖空间中连续的一片像素</li>
<li>利用<em>扫描连续性</em>，也即扫描线扫描步长是1，也即是连续的。</li>
</ul>
<h3 id="%E5%88%A4%E6%96%AD%E7%82%B9%E6%98%AF%E5%90%A6%E5%9C%A8%E4%B8%89%E8%A7%92%E5%BD%A2%E4%B8%AD" tabindex="-1">判断点是否在三角形中</h3>
<p>主要策略</p>
<ul>
<li>利用叉积</li>
<li>利用Bounding Rect</li>
</ul>
<h3 id="edge-walking" tabindex="-1">Edge Walking</h3>
<p>采用“高效扫描线”策略：</p>
<ul>
<li>其实就是直线光栅化的手法</li>
</ul>
<h1 id="%E5%8F%8D%E8%B5%B0%E6%A0%B7" tabindex="-1">反走样</h1>
<p>以MSAA为例，核心方法是<strong>先超采样，再滤波</strong></p>
<p>也即将一个像素在逻辑上分为若干个亚像素，在亚像素级别上使用光栅化算法，然后做滤波回到像素级的离散化结果上</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/0/" class="post-title-link" itemprop="url">区块链共识机制</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-23 11:12:09" itemprop="dateCreated datePublished" datetime="2021-09-23T11:12:09+08:00">2021-09-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6" tabindex="-1">区块链共识机制</h1>
<h2 id="%E5%85%B1%E8%AF%86%E7%9A%84%E5%AE%9A%E4%B9%89" tabindex="-1">共识的定义</h2>
<p>A process of agreement between distrusted nodes on the final state of specified data.</p>
<h3 id="%E8%AF%B4%E6%98%8E" tabindex="-1">说明</h3>
<p>定义中的关键字：</p>
<ul>
<li>共识是<em>达成一致</em>的过程</li>
<li>共识是针对<em>相互不信任的节点</em>之间的操作（这暗示了运用共识的常见场景就是分布式系统）</li>
</ul>
<h2 id="%E4%B8%80%E8%87%B4%E6%80%A7" tabindex="-1">一致性</h2>
<h3 id="%E4%B8%80%E8%87%B4%E6%80%A7%E7%9A%84%E8%A6%81%E6%B1%82" tabindex="-1">一致性的要求</h3>
<p>（待完善）</p>
<h3 id="%E4%B8%80%E8%87%B4%E6%80%A7%E7%9A%84%E9%97%AE%E9%A2%98%E5%92%8C%E6%8C%91%E6%88%98" tabindex="-1">一致性的问题和挑战</h3>
<ul>
<li>网络是不可靠的</li>
<li>节点的处理时间是没有保障的</li>
<li>节点可能是恶意的</li>
<li>同步调用会严重降低分布式系统的可拓展性</li>
</ul>
<h3 id="%E5%8F%AF%E8%83%BD%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88" tabindex="-1">可能的解决方案</h3>
<ul>
<li>同步调用</li>
<li>提前约定</li>
<li>第三方中心调度（不适合去中心化的区块链）</li>
</ul>
<h2 id="%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6" tabindex="-1">共识机制</h2>
<h3 id="%E5%AE%9A%E4%B9%89" tabindex="-1">定义</h3>
<p>A set of steps taken by most/all nodes in a distributed system(e.g. blockchain) to agree on a proposed state or value</p>
<h3 id="%E4%B8%BB%E8%A6%81%E7%89%B9%E6%80%A7" tabindex="-1">主要特性</h3>
<ul>
<li>Agreement 一致性（基本要求）</li>
<li>Termination 可终止性</li>
<li>Validity 合法性：鉴别提案节点的身份</li>
<li>Fault Tolerance 容错性</li>
<li>Interity 完整性</li>
</ul>
<h3 id="%E6%A0%B8%E5%BF%83%E8%A6%81%E6%B1%82" tabindex="-1">核心要求</h3>
<ul>
<li>活性：节点可以在有限时间内得到响应</li>
<li>安全性：数据在节点之间保持严格一致</li>
<li>正确性：</li>
</ul>
<h3 id="%E4%B8%BB%E8%A6%81%E7%B1%BB%E5%88%AB" tabindex="-1">主要类别</h3>
<ul>
<li>
<p>BFT-based 基于拜占庭容错的共识算法</p>
<ul>
<li>性能较高</li>
<li>只使用在小规模的系统</li>
<li>可拓展性差</li>
</ul>
</li>
<li>
<p>Leader Election-based 基于选举的</p>
<ul>
<li>“赢家通吃”：只有最终的胜利者能够提出最终取值</li>
<li>可拓展性很好</li>
<li>性能很低</li>
</ul>
</li>
</ul>
<h2 id="%E5%8C%BA%E5%9D%97%E9%93%BE%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6-1" tabindex="-1">区块链共识机制</h2>
<ul>
<li>公链
<ul>
<li>几乎可以加入任何节点</li>
<li>参与者完全不存在信任</li>
<li>使用算力敏感的PoW机制</li>
<li>代表项目是比特币</li>
</ul>
</li>
<li>联盟链/私链
<ul>
<li>节点加入系统需要审查，节点之间具有信任基础</li>
<li>节点较少</li>
<li>可以使用BFT-based的高效共识算法</li>
</ul>
</li>
</ul>
<h2 id="%E6%8B%9C%E5%8D%A0%E5%BA%AD%E5%AE%B9%E9%94%99" tabindex="-1">拜占庭容错</h2>
<p>拜占庭容错（BFT）来源于拜占庭将军问题：</p>
<ul>
<li>拜占庭的将军们分布在各地</li>
<li>关于是否开战的问题需要将军们达成共识</li>
<li>在通信过程中可能有外敌干扰</li>
</ul>
<p>为解决拜占庭将军问题而设计的策略就是<em>拜占庭容错(BFT)</em></p>
<h3 id="%E5%89%8D%E6%8F%90%E6%9D%A1%E4%BB%B6" tabindex="-1">前提条件</h3>
<ul>
<li>至少4个参与者</li>
<li>每轮次至少一个发令者</li>
<li>少于1/3的恶意参与者、失效参与者</li>
<li>极大概率可达网络</li>
<li>可控的网络规模（少于100参与者）</li>
</ul>
<p>完整的拜占庭容错模型（PBFT）考虑三类节点：</p>
<ul>
<li>正常节点</li>
<li>失效节点</li>
<li>恶意节点</li>
</ul>
<p>RAFT是简化版的PBFT，只考虑两类问题：</p>
<ul>
<li>正常节点</li>
<li>失效节点</li>
</ul>
<h2 id="%E6%AF%94%E7%89%B9%E5%B8%81%E5%B8%B8%E8%A7%81%E6%94%BB%E5%87%BB" tabindex="-1">比特币常见攻击</h2>
<ul>
<li>
<p>双花攻击</p>
<p>将同一个比特币承诺输出给两个不同的人。</p>
<p>注意：由于两个交易分属不同区块，不同节点以不同顺序收到这两个区块，导致两个交易中有一个随机失效，<strong>不同节点的账本不一样</strong></p>
<p>解决方案：<em>同等验证</em>：全网必须为每一笔交易投票达到一定票数的区块才是有效的，因而全网账本保持同步。</p>
</li>
<li>
<p>多重身份攻击/女巫攻击</p>
<p>比特币网络中创建身份的代价极低（创建一对密钥的事）</p>
<p>若结合双花攻击，每个身份都允许参与投票则<strong>可以通过伪造大量身份来允许双花</strong></p>
<p>女巫攻击有效的根本原因是<strong>投票没有成本</strong></p>
<p>解决方案：<strong>提高投票代价</strong>，也即<strong>工作量证明(Proof of Work, PoW)</strong></p>
<p>PoW对抗女巫攻击的原理是：<strong>基本有无限的身份，每个身份也只有有限算力</strong>。哈希是谜题友好的，不存在捷径，<strong>想要在投票中占有一票，必须给出足够的算力而不是给出一对没有成本的密钥所代表的身份</strong></p>
<p>通过奖励解谜成功的节点，解密成功的节点可以在区块中加入自己获得比特币的一笔交易。这就是挖矿。</p>
<p>实际上PoW机制导致挖矿类似“公平的买彩票”</p>
</li>
</ul>
<h2 id="%E6%AF%94%E7%89%B9%E5%B8%81%E6%8C%96%E7%9F%BF" tabindex="-1">比特币挖矿</h2>
<p>挖矿本质是一种节点参与基于PoW机制的共识机制，获得奖励的机制。</p>
<p>注意挖矿问题的完整描述如下：</p>
<ul>
<li>计算数Nounce，使得对于给定的<strong>上一个区块的</strong>Hash、默克尔树根Hash、时间戳，<strong>拼接上Nounce之后做Hash得到的值的前k位为0</strong>，其中<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span></span></span></span></eq>就是谜题难度。</li>
</ul>
<h3 id="pow%E7%89%B9%E7%82%B9" tabindex="-1">PoW特点</h3>
<ul>
<li>不容易完成（基本特征，表明该需要工作量）</li>
<li>容易验证（其他节点可以很快验证确实付出了工作量）</li>
<li>工作过程公平（不存在解决问题捷径）</li>
<li>具有随机性（算力大只能保证完成概率高，而不是赢家通吃，避免垄断）</li>
</ul>
<h3 id="%E6%8C%96%E7%9F%BF%E5%A5%96%E5%8A%B1%E4%B8%8E%E9%80%9A%E7%BC%A9" tabindex="-1">挖矿奖励与通缩</h3>
<p>作为付出巨大算力来维护比特币公链分布式系统的奖励，成功求解正确的Nounce的节点会拥有<strong>当前节点的记账权</strong>，可以<strong>在常规交易的最后附加上一条自己获得比特币奖励的交易记录</strong>。注意奖励是固定的，不能随意自定。</p>
<p>初始的奖励是50个，但<strong>每隔21万个区块奖励自动减半</strong>。最终，整个比特币系统中流通的比特币数目不超过2100万个。</p>
<p>因此，比特币相当于一种通缩的货币。</p>
<h3 id="%E7%AE%97%E5%8A%9B" tabindex="-1">算力</h3>
<p>比特币挖矿硬件的发展路径：CPU计算-&gt;GPU计算-&gt;FPGA计算-&gt;ASIC专用Hash矿机-&gt;矿池</p>
<p>截至2018年，全网算力达到<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2.6</mn><mo>×</mo><mn>1</mn><msup><mn>0</mn><mn>18</mn></msup></mrow><annotation encoding="application/x-tex">2.6\times 10^{18}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">2.6</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">18</span></span></span></span></span></span></span></span></span></span></span></span></eq>次Hash计算每秒（全球500强超算算力之和的100倍）</p>
<p>中国年均发电量4W亿千瓦时；<br>
比特币全网挖矿好点1k亿千瓦时，这样的用电量大于多数小国家一年的用电量。</p>
<h2 id="%E5%85%B1%E8%AF%86%E6%9C%BA%E5%88%B6%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7" tabindex="-1">共识机制的局限性</h2>
<h3 id="flp%E4%B8%8D%E5%8F%AF%E8%83%BD%E5%8E%9F%E7%90%86" tabindex="-1">FLP不可能原理</h3>
<p>可以证明：</p>
<p><strong>在网络可靠，但允许节点失效的最小异步模型系统，不存在一个可以解决一致性的确定性算法。</strong></p>
<p>说明：</p>
<ul>
<li>以上原理称为<em>FLP不可能原理</em></li>
<li>现实中，网络往往不可靠，这里是一个理想化假设</li>
<li>所谓<em>允许节点失效的最小异步模型系统</em>是允许非常少（甚至是一个）的节点失效的异步模型</li>
</ul>
<p>FLP原理的等价表述是：<strong>异步分布式系统不能同时保证活性和安全性</strong></p>
<h3 id="%E6%8A%98%E8%A1%B7" tabindex="-1">折衷</h3>
<ul>
<li>
<p>弱化活性</p>
<p>BFT-based共识机制可以保证安全性，但不保证活性</p>
</li>
<li>
<p>弱化安全性</p>
<p>Election-based共识机制可以保证活性，但不保证安全性</p>
</li>
</ul>
<h2 id="%E6%AF%94%E7%89%B9%E5%B8%81%E9%9D%A2%E4%B8%B4%E7%9A%84%E6%8C%91%E6%88%98" tabindex="-1">比特币面临的挑战</h2>
<ul>
<li>
<p>挖矿能耗</p>
<p>年均耗电量超过全球160多个国家</p>
</li>
<li>
<p>可拓展性</p>
<p>比特币网络的吞吐率很低。其交易吞吐量低于中心化支付系统的2-3个数量级</p>
</li>
<li>
<p>安全性</p>
<p>比特币网络本身是相对安全的，但比特币网络低下的协议却不一定。</p>
<p>一个例子是基于区块链网络的智能合约。由于智能合约是一串<strong>图灵完备的源代码</strong>，一旦这段代码存在漏洞，则可以针对合约本身进行攻击</p>
</li>
</ul>
<h2 id="%E6%96%B0%E6%8E%A2%E7%B4%A2%EF%BC%9Apox" tabindex="-1">新探索：PoX</h2>
<ul>
<li>
<p>PoS：Proof of Stake 基于股权的证明</p>
<p>假设持有股权分额更大的节点更倾向于维护系统运行的规则，因此将共识的最终达成依赖于持有更多货币的节点</p>
<p>优点是比PoW高效得多</p>
<p>缺点是马太效应严重，货币会迅速集中到个别用户手中，然后这些用户会完全垄断系统的运行</p>
</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/0/" class="post-title-link" itemprop="url">区块链结构</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-23 10:46:36" itemprop="dateCreated datePublished" datetime="2021-09-23T10:46:36+08:00">2021-09-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-08 18:10:11" itemprop="dateModified" datetime="2023-06-08T18:10:11+08:00">2023-06-08</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E5%8C%BA%E5%9D%97%E9%93%BE%E7%BB%93%E6%9E%84" tabindex="-1">区块链结构</h1>
<h2 id="%E5%8C%BA%E5%9D%97%E5%AE%9A%E4%B9%89" tabindex="-1">区块定义</h2>
<p>如果将区块链理解为“账本”，则区块可以理解为“账本中的某一页”。</p>
<p>实际上一个区块保存着一批交易记录。</p>
<h2 id="%E5%8C%BA%E5%9D%97%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F" tabindex="-1">区块数据格式</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Block Header:           90B</span><br><span class="line">- version:              4B</span><br><span class="line">- previous block hash:  32B</span><br><span class="line">- merkle root hash:     32B</span><br><span class="line">- time:                 4B</span><br><span class="line">- bits:                 4B</span><br><span class="line">- nounce:               4B</span><br><span class="line"></span><br><span class="line">Transactions(Block Body): a bunch of TXs</span><br></pre></td></tr></table></figure>
<p>说明：</p>
<ul>
<li>区块头中的“bits”指的是<em>谜题难度</em></li>
<li>区块头中的“nounce”来自密码学术语<em>nounce</em>是</li>
<li>区块体的交易按照<em>默克尔树</em>来组织</li>
</ul>
<h2 id="%E5%93%88%E5%B8%8C%E6%8C%87%E9%92%88" tabindex="-1">哈希指针</h2>
<p>哈希指针其实是<em>上一个区块的首部的哈希值</em>。</p>
<p>之所以不需要把主体部分也哈希进去是因为头部包含了默克尔树哈希了，已经包含了主体部分的摘要了。</p>
<p>沿着哈希指针，链条的上最新的节点最终可以找到最初的节点。最初的节点就是<strong>创世区块</strong></p>
<p>“创世区块”的内容是<strong>完全静态不变的</strong>，也即其哈希值不变的，且<strong>其哈希值是公开的</strong>。</p>
<h2 id="%E4%BA%A4%E6%98%93" tabindex="-1">交易</h2>
<h3 id="%E8%B4%A6%E6%88%B7%E6%A8%A1%E5%9E%8B" tabindex="-1">账户模型</h3>
<p>在比特币中本质上不存在“账户”，身份完全由公钥产生的地址来决定，也无法简单地查询一个身份下的账户等基本信息。</p>
<h3 id="%E6%AF%94%E7%89%B9%E5%B8%81%E8%BD%AC%E8%B4%A6" tabindex="-1">比特币转账</h3>
<p>其实就是：</p>
<ul>
<li>数字签名充当“印章”</li>
<li>所有节点充当“公证人”</li>
</ul>
<p>比特币转账的最小单位是一“聪”，等于一亿分之一个比特币</p>
<p>转账交易分为两部分：</p>
<ul>
<li>“输入”</li>
<li>“输出”</li>
</ul>
<h3 id="%E8%BE%93%E5%87%BA" tabindex="-1">输出</h3>
<p>最重要的是内含一个<strong>使用接收人的公钥上锁的脚本</strong>。</p>
<p>一个输出可以对应多个输入（同时转账给多个人）</p>
<h3 id="%E8%BE%93%E5%85%A5" tabindex="-1">输入</h3>
<p>不能凭空产生，<strong>必须引用并解锁另一个输出</strong>。由于输出中包含了接收人的公钥锁定的脚本，因此只有接收人用自己的私钥才能解锁，才能引用这一笔交易。</p>
<p>一笔输入交易可以引用多笔输出交易。</p>
<h3 id="utxo%E6%A8%A1%E5%9E%8B" tabindex="-1">UTXO模型</h3>
<p>*UTXO(Unspent Transaction Output)*就是计算某账户余额的方法，其实就是收到的减去花出去的。具体来说就是计算用户拥有的输入交易的总数额减去输出出去的数额</p>
<p>这种模型的好处是，<strong>一切交易都是可回溯的</strong>，比特币交易链其实是<strong>数字签名链</strong></p>
<h2 id="%E9%BB%98%E5%85%8B%E5%B0%94%E6%A0%91" tabindex="-1">默克尔树</h2>
<p>其实就是把交易组织成二叉树叶子，然后每个内部节点把孩子哈希拼接起来再哈希，这样层层哈希，最终把整个块的所有交易哈希到一个32B的值中（默克尔树的根）</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/8/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/10/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">BBPumpkin</p>
  <div class="site-description" itemprop="description">BBPumpkin的个人博客( •̀ ω •́ )y</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">171</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">51</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/PumpkinJimmy" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;PumpkinJimmy" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BBPumpkin</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
