<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"pumpkinjimmy.github.io","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
<meta property="og:type" content="website">
<meta property="og:title" content="BBPumpkin的博客">
<meta property="og:url" content="http://pumpkinjimmy.github.io/index.html">
<meta property="og:site_name" content="BBPumpkin的博客">
<meta property="og:description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="BBPumpkin">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://pumpkinjimmy.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>BBPumpkin的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">BBPumpkin的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/813299cd/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/813299cd/" class="post-title-link" itemprop="url">张量概论学习</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-10-09 01:11:24 / 修改时间：01:30:02" itemprop="dateCreated datePublished" datetime="2024-10-09T01:11:24+08:00">2024-10-09</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E5%BC%A0%E9%87%8F%E6%A6%82%E8%AE%BA%E5%AD%A6%E4%B9%A0" tabindex="-1">张量概论学习</h1>
<h2 id="%E9%A2%84%E5%A4%87%E7%9F%A5%E8%AF%86" tabindex="-1">预备知识</h2>
<ul>
<li>爱因斯坦求和约定：
<ul>
<li>在单项式中，我们约定重复出现恰好一次的上/下标（哑指标）充当求和的变量。也即公式<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">L_{ij} x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq>的实际含义是<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mo>∑</mo><mi>i</mi></msub><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\sum_i L_{ij} x_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0497em;vertical-align:-0.2997em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.162em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq></li>
<li>该约定的好处是在多个sigma嵌套的时候可以在不产生歧义的情况下简化书写；且根据求和运算的性质，可以自然地将这种省略求和的单项代入其他公式进行运算</li>
</ul>
</li>
<li>以下讨论是从典型的欧氏空间的向量/矩阵之外，从纯线性空间的视角推导并推广这个张量的概念，原则上可以适用于很多非欧式的线性空间</li>
<li><em>形式（form）</em>：所谓“形式”，就是关于某种数学对象书写的公式，此时将该公式用于表征甚至定义另一种数学对象。
<ul>
<li>可以不严谨地理解为“运算”。比如说，后面会见到的，使用向量的并矢形式来定义二阶张量</li>
<li>“形式”的意义在于，我们可以将一种运算（一种映射）看作是新的数学对象的定义</li>
</ul>
</li>
</ul>
<h2 id="%E5%90%91%E9%87%8F" tabindex="-1">向量</h2>
<ul>
<li>
<p>不引入“箭头”的几何直观，我们在“点空间”上定义向量：</p>
<p>考虑任意一个点空间，任取两个点<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo separator="true">,</mo><mi>q</mi></mrow><annotation encoding="application/x-tex">p, q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span></span></span></span></eq>，我们不加说明地定义点之间的差运算<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>−</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">q - p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></eq>，然后将认为向量表征的就是点的差运算的结果。</p>
<p>由此，认为一阶张量（也即<em>向量</em>）可以看作一种关于空间中点的映射：</p>
<p><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">v</mi><mo stretchy="false">(</mo><mi mathvariant="bold">p</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">q</mi></mrow><annotation encoding="application/x-tex">\bf{v}(p) = q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span><span class="mopen">(</span><span class="mord mathbf">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">q</span></span></span></span></span></eq>，当<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>q</mi><mo>−</mo><mi>p</mi><mo>=</mo><mi mathvariant="bold">v</mi></mrow><annotation encoding="application/x-tex">q - p = \bf v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span></span></span></span></eq></p>
<p>虽然这个有点循环定义，但我们摆脱了向量的坐标表示。实际上，上述定义没有摆脱向量的箭头的几何直观、四边形法则、以及平直空间的隐含假设。</p>
<p>将向量看作是一种“点映射”的观点让我们直接定义出了向量加法运算：</p>
<p><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">u</mi><mo>+</mo><mrow><mi mathvariant="bold">v</mi><mo>=</mo><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">u</mi><mo>+</mo><mrow><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi mathvariant="bold">p</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mi mathvariant="bold">v</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">u</mi><mo stretchy="false">(</mo><mi mathvariant="bold">p</mi><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mrow></mrow></mrow></mrow></mrow><annotation encoding="application/x-tex">\bf{u} + \bf{v} = (\bf{u} + \bf{v})(p) = \bf{v} (\bf{u}(p))</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">u</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathbf">u</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathbf">p</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span><span class="mopen">(</span><span class="mord"><span class="mord"><span class="mord mathbf">u</span></span><span class="mopen">(</span><span class="mord mathbf">p</span><span class="mclose">))</span></span></span></span></span></span></span></span></span></span></eq></p>
<p>由上我们引申出向量的标量运算的定义：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi><mrow><mi mathvariant="bold">v</mi><mo stretchy="false">(</mo><mi mathvariant="bold">p</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">\alpha \bf{v}(p)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span><span class="mopen">(</span><span class="mord mathbf">p</span><span class="mclose">)</span></span></span></span></span></eq>看作<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></eq>次迭代应用<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">v</mi></mrow><annotation encoding="application/x-tex">\bf{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span></span></span></span></span></eq>运算</p>
</li>
<li>
<p>内积</p>
<ul>
<li>
<p><em>内积</em>是定义在向量上的一种“线性形式”，满足正定性、对称性、双线性的运算，记作<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>⋅</mo><mi>v</mi></mrow><annotation encoding="application/x-tex">u \cdot v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span></span></span></span></eq></p>
<ul>
<li>内积可以看作一种向量上的线性形式</li>
<li>正定性：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>⋅</mo><mi>v</mi><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">v \cdot v \ge 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7719em;vertical-align:-0.136em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></eq>，且仅在<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mo>=</mo><mover accent="true"><mn>0</mn><mo>⃗</mo></mover></mrow><annotation encoding="application/x-tex">v = \vec 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9274em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9274em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord">0</span></span><span style="top:-3.2134em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.2355em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span></span></span></span></eq>是取到0</li>
<li>对称性：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>u</mi><mo>⋅</mo><mi>v</mi><mo>=</mo><mi>v</mi><mo>⋅</mo><mi>u</mi></mrow><annotation encoding="application/x-tex">u \cdot v = v \cdot u</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">u</span></span></span></span></eq></li>
</ul>
</li>
<li>
<p>内积的重要性在于，依赖内积，我们可以定义向量的模、点的距离，从而构成所谓的“内积空间”</p>
</li>
<li>
<p>最重要的是，内积可以定义<strong>向量的正交性</strong>：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="bold">u</mi><mo>⋅</mo><mi mathvariant="bold">v</mi></mrow><mo>=</mo><mn mathvariant="bold">0</mn></mrow><annotation encoding="application/x-tex">\bf {u \cdot v} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">0</span></span></span></span></span></eq>等价于<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi></mrow><annotation encoding="application/x-tex">\bf u, v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6389em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span></span></span></span></eq>正交</p>
</li>
</ul>
</li>
<li>
<p>将向量的集合记作空间<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">V</mi></mrow><annotation encoding="application/x-tex">\mathcal V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span></span></span></eq></p>
</li>
<li>
<p><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">V</mi></mrow><annotation encoding="application/x-tex">\mathcal V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span></span></span></eq>的<em>基</em></p>
<ul>
<li>
<p>便利记号：克罗内克delta可以看作是关于两个下表的一个标量函数，定义如下</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>δ</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mrow><mo fence="true">{</mo><mtable rowspacing="0.36em" columnalign="left left" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>1</mn><mo separator="true">,</mo><mi>i</mi><mo>=</mo><mi>j</mi></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mrow><mn>0</mn><mo separator="true">,</mo><mi>i</mi><mo mathvariant="normal">≠</mo><mi>j</mi></mrow></mstyle></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">
        \delta_{ij} = \begin{cases}1, i = j\\
        0, i \ne j
        \end{cases}
    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:3em;vertical-align:-1.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">{</span></span><span class="mord"><span class="mtable"><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.69em;"><span style="top:-3.69em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.008em;"></span><span class="mord"><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel"><span class="mrel"><span class="mord vbox"><span class="thinbox"><span class="rlap"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="inner"><span class="mord"><span class="mrel"></span></span></span><span class="fix"></span></span></span></span></span><span class="mrel">=</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.19em;"><span></span></span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></eqn></section></li>
<li>
<p>这里的基特指<em>单位正交基</em></p>
</li>
<li>
<p>对于有限维线性空间<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">V</mi></mrow><annotation encoding="application/x-tex">\mathcal V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span></span></span></eq>，设维度记作<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>=</mo><mrow><mi mathvariant="normal">d</mi><mi mathvariant="normal">i</mi><mi mathvariant="normal">m</mi><mo stretchy="false">(</mo><mi mathvariant="script">V</mi><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">n = \rm dim (\mathcal V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathrm">dim</span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mclose">)</span></span></span></span></span></eq>，则它的单位正交基<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">B</mi><mo>=</mo><mo stretchy="false">{</mo><mrow><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">1</mn></msub><mo separator="true">,</mo><msub><mi mathvariant="bold">e</mi><mn mathvariant="bold">2</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">n</mi></msub><mo stretchy="false">}</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal B = \{\bf e_1, e_2, \dots, e_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.03041em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1611em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></span></eq>是一个包含<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></eq>个向量的集合，且满足：</p>
<ul>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">i</mi></msub><mo>⋅</mo><mrow><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">j</mi></msub><mo>=</mo><msub><mi mathvariant="bold">δ</mi><mrow><mi mathvariant="bold">i</mi><mi mathvariant="bold">j</mi></mrow></msub></mrow></mrow><annotation encoding="application/x-tex">\bf{e}_i \cdot \bf{e_j} = \delta_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">e</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></span></eq></li>
</ul>
</li>
</ul>
</li>
<li>
<p>线性组合与分量表示：</p>
<ul>
<li>一个线性组合记作：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>α</mi><mi>i</mi></msub><msub><mi mathvariant="bold">u</mi><mi mathvariant="bold">i</mi></msub></mrow><annotation encoding="application/x-tex">\alpha_i \bf{u}_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5944em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">u</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></eq>（注意这里使用了爱因斯坦求和约定，这其实是一个求和式）</li>
<li>基的特点：线性空间<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">V</mi></mrow><annotation encoding="application/x-tex">\mathcal V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span></span></span></eq>中的向量可以使用基<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">B</mi></mrow><annotation encoding="application/x-tex">\mathcal B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.03041em;">B</span></span></span></span></eq>的线性组合表示：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">u</mi><mo>=</mo><msub><mi mathvariant="bold">α</mi><mi mathvariant="bold">i</mi></msub><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">i</mi></msub></mrow><annotation encoding="application/x-tex">\bf{u} = \alpha_i \bf{e}_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5944em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">u</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">e</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></span></eq>，且该表示是唯一的，其中<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span></eq>个标量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>α</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">\alpha_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5806em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0037em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq>组成的数组就是向量的分量表示</li>
</ul>
</li>
</ul>
<h2 id="%E4%BA%8C%E9%98%B6%E5%BC%A0%E9%87%8F" tabindex="-1">二阶张量</h2>
<h3 id="%E4%BA%8C%E9%98%B6%E5%BC%A0%E9%87%8F%E5%AE%9A%E4%B9%89" tabindex="-1">二阶张量定义</h3>
<p>定义二阶张量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi></mrow><annotation encoding="application/x-tex">\bf L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord mathbf">L</span></span></span></span></span></eq>为满足如下条件的映射：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">L</mi><mo>:</mo><mi mathvariant="script">V</mi><mo>→</mo><mi mathvariant="script">V</mi><mtext> </mtext><mi mathvariant="bold">∣</mi><mtext> </mtext><mrow><mi mathvariant="bold">L</mi><mo stretchy="false">(</mo><mi mathvariant="bold">α</mi><mrow><mi mathvariant="bold">u</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">α</mi><mrow><mrow><mi mathvariant="bold">L</mi><mo stretchy="false">(</mo><mi mathvariant="bold">u</mi><mo stretchy="false">)</mo></mrow><mtext> </mtext><mi mathvariant="bold">∀</mi><mi mathvariant="bold">u</mi><mo>∈</mo><mi mathvariant="script">V</mi><mo separator="true">,</mo><mi mathvariant="bold">α</mi><mo>∈</mo><mi mathvariant="double-struck">R</mi></mrow></mrow></mrow></mrow><annotation encoding="application/x-tex">
    \bf{L}: \mathcal V \to \mathcal V\ |\ \bf{L}(\alpha\bf{u}) = \alpha \bf{L(u)}\ \forall u \in \mathcal V, \alpha \in \mathbb R
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">L</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mspace"> </span><span class="mord mathbf">∣</span><span class="mspace"> </span><span class="mord"><span class="mord"><span class="mord mathbf">L</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mord"><span class="mord mathbf">u</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mord"><span class="mord"><span class="mord mathbf">L</span><span class="mopen">(</span><span class="mord mathbf">u</span><span class="mclose">)</span></span><span class="mspace"> </span><span class="mord mathbf">∀u</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbb">R</span></span></span></span></span></span></span></span></span></eqn></section><p>这个定义过于笼统，它只是说明了二阶张量可以用一个向量空间上关于数乘运算可交换运算顺序的映射来表示。我更倾向于用并矢来定义二阶张量。</p>
<p>注意这里“形式”的运用：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi></mrow><annotation encoding="application/x-tex">\bf L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord mathbf">L</span></span></span></span></span></eq>它本来是一种映射，我们将这种映射形式看作是张量这个数学对象的定义。</p>
<p>实际上，如果将张量看作是实数的推广，我们可以这样书写省略括号：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi><mo stretchy="false">(</mo><mi mathvariant="bold">u</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">L</mi><mi mathvariant="bold">u</mi></mrow><annotation encoding="application/x-tex">\bf L(u) = Lu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">L</span><span class="mopen">(</span><span class="mord mathbf">u</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">Lu</span></span></span></span></span></eq>。<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi><mi mathvariant="bold">u</mi></mrow><annotation encoding="application/x-tex">\bf Lu</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord mathbf">Lu</span></span></span></span></span></eq>的记号中，我们强调张量本身作为一种数的推广的特质，弱化它作为映射的特质，但我们仍然要记住它可以理解为一种线性映射。</p>
<p>我们记从<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">V</mi></mrow><annotation encoding="application/x-tex">\mathcal V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span></span></span></eq>上构造的所有二阶张量构成的线性空间为<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi mathvariant="script">V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Lin(\mathcal V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mclose">)</span></span></span></span></eq>。</p>
<h3 id="%E5%B9%B6%E7%9F%A2" tabindex="-1">并矢</h3>
<p>给定<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi></mrow><mo>∈</mo><mi mathvariant="script">V</mi></mrow><annotation encoding="application/x-tex">\bf{u,v} \in \mathcal V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span></span></span></span></eq>，并矢运算<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">u</mi><mo>⊗</mo><mi mathvariant="bold">v</mi></mrow><annotation encoding="application/x-tex">\bf{u} \otimes \bf{v}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">u</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span></span></span></span></span></span></eq>是一个二阶张量，对任意向量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">w</mi></mrow><annotation encoding="application/x-tex">\bf w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span></span></span></span></eq>满足：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo stretchy="false">(</mo><mi mathvariant="bold">u</mi><mo>⊗</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo><mi mathvariant="bold">w</mi><mo>=</mo><mi mathvariant="bold">v</mi><mo>⋅</mo><mi mathvariant="bold">w</mi><mtext> </mtext><mi mathvariant="bold">u</mi></mrow><annotation encoding="application/x-tex">
    \bf (u \otimes v) w = v \cdot w\ u
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathbf">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span><span class="mord mathbf" style="margin-right:0.01597em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span><span class="mspace"> </span><span class="mord mathbf">u</span></span></span></span></span></span></eqn></section><p>注意，上述公式中，左侧将二阶张量的括号省略了，<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi mathvariant="bold">u</mi><mo>⊗</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo><mi mathvariant="bold">w</mi></mrow><annotation encoding="application/x-tex">\bf (u \otimes v) w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathbf">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span></span></span></span></eq>等效<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi mathvariant="bold">u</mi><mo>⊗</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo><mo stretchy="false">(</mo><mi mathvariant="bold">w</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\bf (u \otimes v)(w)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathbf">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">w</span><span class="mclose">)</span></span></span></span></span></eq>；右侧则是向量的数乘运算，这已经有了良好定义。</p>
<p>这个看起来奇怪的定义，用矩阵论的视角，将向量看作单列矩阵来看就很自然：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">u</mi><mo>⊗</mo><mi mathvariant="bold">v</mi><mo>=</mo><mi mathvariant="bold">u</mi><msup><mi mathvariant="bold">v</mi><mi mathvariant="normal">T</mi></msup></mrow><annotation encoding="application/x-tex">\bf u \otimes v = uv^{\rm T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9247em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathbf">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">u</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">T</span></span></span></span></span></span></span></span></span></span></span></span></span></span></eq>，<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">u</mi><mo>⊗</mo><mi mathvariant="bold">v</mi><mtext> </mtext><mi mathvariant="bold">w</mi><mo>=</mo><mi mathvariant="bold">u</mi><msup><mi mathvariant="bold">v</mi><mi mathvariant="normal">T</mi></msup><mi mathvariant="bold">w</mi><mo>=</mo><mi mathvariant="bold">u</mi><mo stretchy="false">(</mo><mi mathvariant="bold">v</mi><mo>⋅</mo><mi mathvariant="bold">w</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\bf u \otimes v\ w = uv^{\rm T}w = u(v\cdot w)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mspace"> </span><span class="mord mathbf" style="margin-right:0.01597em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">u</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathrm mtight">T</span></span></span></span></span></span></span></span></span></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">u</span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span><span class="mclose">)</span></span></span></span></span></eq></p>
<h3 id="%E4%BA%8C%E9%98%B6%E5%BC%A0%E9%87%8F%E7%9A%84%E7%BA%BF%E6%80%A7%E8%A1%A8%E7%A4%BA" tabindex="-1">二阶张量的线性表示</h3>
<p>并矢运算最重要的意义在于，<strong>我们可以将二阶张量空间跟标准向量空间统一在一起</strong>。比如，考虑<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">V</mi></mrow><annotation encoding="application/x-tex">\mathcal V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span></span></span></eq>的基<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">B</mi><mo>=</mo><mo stretchy="false">{</mo><mrow><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">i</mi></msub><mo stretchy="false">}</mo></mrow></mrow><annotation encoding="application/x-tex">\mathcal B = \{\bf{e}_i\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.03041em;">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">e</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></span></eq>，使用并矢构造如下一组基：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msup><mi mathvariant="script">B</mi><mn>2</mn></msup><mo>=</mo><mo stretchy="false">{</mo><mrow><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">i</mi></msub><mo>⊗</mo><mrow><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">j</mi></msub><mo stretchy="false">}</mo><mspace width="1em"/><mrow><mi mathvariant="normal">i</mi><mo separator="true">,</mo><mi mathvariant="normal">j</mi><mo>=</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><mi mathvariant="normal">n</mi></mrow></mrow></mrow></mrow><annotation encoding="application/x-tex">
    \mathcal{B}^2 = \{ \bf{e}_i \otimes \bf{e}_j \}\quad \rm i,j = 1,2,\dots,n
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8641em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.03041em;">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0361em;vertical-align:-0.2861em;"></span><span class="mopen">{</span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">e</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">e</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">}</span><span class="mspace" style="margin-right:1em;"></span><span class="mord"><span class="mord mathrm">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathrm">j</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathrm">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathrm">n</span></span></span></span></span></span></span></span></eqn></section><p>则<strong>可以证明<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="script">B</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\mathcal{B}^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.03041em;">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></eq>构成二阶张量空间<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi mathvariant="script">V</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Lin(\mathcal V)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mclose">)</span></span></span></span></eq>的一组基底</strong>，且可以使用分量表示法表示一个二阶张量，也即：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">L</mi><mo>=</mo><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mrow><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">i</mi></msub><mo>⊗</mo><msub><mi mathvariant="bold">e</mi><mi mathvariant="bold">j</mi></msub></mrow></mrow><annotation encoding="application/x-tex">
    \mathbf L = L_{ij} \bf{e}_i \otimes \bf{e}_j
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">e</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord"><span class="mord mathbf">e</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></span></span></eqn></section><p>上面书写的线性组合的系数就是二阶张量的分量。我们根据下表将分量组织为一张二维表就得到了我们熟悉的矩阵。</p>
<p>我们可以给出计算分量值<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">L_{ij}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></eq>的公式（展开即可证明）：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⋅</mo><mi mathvariant="bold">L</mi><msub><mi mathvariant="bold">e</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">
    L_{ij} = \mathbf e_i \cdot \mathbf L \mathbf e_j
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5945em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9722em;vertical-align:-0.2861em;"></span><span class="mord mathbf">L</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></eqn></section><p>我们也将二阶张量表示为单位正交基的线性组合的过程称为<em>正交分解</em></p>
<h3 id="%E5%BC%A0%E9%87%8F%E7%A7%AF" tabindex="-1">张量积</h3>
<p>可以自然地导出两个二阶张量的积：将二阶张量看作映射的话，则它们的积就是映射的复合。</p>
<p><em>二阶张量的张量积跟矩阵乘法兼容</em>，或者说如果认为有限维二阶张量就是矩阵，则二阶张量的法则就跟矩阵乘法完全一致。</p>
<p>从二阶张量的正交分解表示我们可以自然地导出矩阵乘法的表达式。考虑<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi><mo>=</mo><mi mathvariant="bold">A</mi><mi mathvariant="bold">B</mi></mrow><annotation encoding="application/x-tex">\mathbf{L = AB}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord mathbf">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">AB</span></span></span></span></span></eq>，则：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⋅</mo><mi mathvariant="bold">L</mi><msub><mi mathvariant="bold">e</mi><mi>j</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⋅</mo><msub><mrow><mi mathvariant="bold">A</mi><mi mathvariant="bold">B</mi><mi mathvariant="bold">e</mi></mrow><mi>j</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⋅</mo><mi mathvariant="bold">A</mi><mo stretchy="false">(</mo><msub><mi>B</mi><mrow><mi>h</mi><mi>k</mi></mrow></msub><msub><mi mathvariant="bold">e</mi><mi>h</mi></msub><mo>⊗</mo><msub><mi mathvariant="bold">e</mi><mi>k</mi></msub><msub><mi mathvariant="bold">e</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mtext>（由基向量定义和并矢定义）</mtext><msub><mi>B</mi><mrow><mi>h</mi><mi>k</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>k</mi><mi>j</mi></mrow></msub><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⋅</mo><mi mathvariant="bold">A</mi><msub><mi mathvariant="bold">e</mi><mi>h</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mtext>（由基向量定义和并矢定义）</mtext><msub><mi>B</mi><mrow><mi>h</mi><mi>k</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>k</mi><mi>j</mi></mrow></msub><msub><mi>A</mi><mrow><mi>l</mi><mi>m</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>m</mi><mi>h</mi></mrow></msub><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⋅</mo><msub><mi mathvariant="bold">e</mi><mi>l</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mtext>（由基向量定义）</mtext><msub><mi>A</mi><mrow><mi>l</mi><mi>m</mi></mrow></msub><msub><mi>B</mi><mrow><mi>h</mi><mi>k</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>m</mi><mi>h</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>i</mi><mi>l</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>k</mi><mi>j</mi></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mtext>（有</mtext><mi>d</mi><mi>e</mi><mi>l</mi><mi>t</mi><mi>a</mi><mtext>定义）</mtext><msub><mi>A</mi><mrow><mi>l</mi><mi>h</mi></mrow></msub><msub><mi>B</mi><mrow><mi>h</mi><mi>k</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>i</mi><mi>l</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>k</mi><mi>j</mi></mrow></msub><mo>=</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>h</mi></mrow></msub><msub><mi>B</mi><mrow><mi>h</mi><mi>k</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>k</mi><mi>j</mi></mrow></msub><mo>=</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>h</mi></mrow></msub><msub><mi>B</mi><mrow><mi>h</mi><mi>j</mi></mrow></msub></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">
  \begin{aligned}
    L_{ij} &amp;= \mathbf e_i \cdot \mathbf L \mathbf e_j \\
    &amp;= \mathbf e_i\cdot \mathbf{ABe}_j \\
    &amp;= \mathbf e_i\cdot \mathbf{A} (B_{hk} \mathbf e_h \otimes \mathbf e_k \mathbf e_j)\\
    &amp;= （由基向量定义和并矢定义）B_{hk}\delta_{kj} \mathbf e_i \cdot \mathbf A  \mathbf e_h\\
    &amp;= （由基向量定义和并矢定义）B_{hk}\delta_{kj}A_{lm} \delta_{mh} \mathbf e_i \cdot  \mathbf e_l\\
    &amp;= （由基向量定义）A_{lm} B_{hk} \delta_{mh} \delta_{il} \delta_{kj} \\
    &amp;= （有delta定义）A_{lh} B_{hk} \delta_{il} \delta_{kj} = A_{ih}B_{hk}\delta_{kj} = A_{ih}B_{hj}
    \end{aligned}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:10.5em;vertical-align:-5em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.5em;"><span style="top:-7.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-6.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-0.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:1.34em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:5.5em;"><span style="top:-7.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">L</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-6.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord"><span class="mord mathbf">ABe</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">A</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">hk</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">（由基向量定义和并矢定义）</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">hk</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">kj</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">A</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">h</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">（由基向量定义和并矢定义）</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">hk</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">kj</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">mh</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-0.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">（由基向量定义）</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">hk</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">mh</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">kj</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:1.34em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">（有</span><span class="mord mathnormal">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">lt</span><span class="mord mathnormal">a</span><span class="mord cjk_fallback">定义）</span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mord mathnormal mtight">h</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">hk</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">kj</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ih</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">hk</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">kj</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ih</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">hj</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:5em;"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section><p>结论：<br>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>h</mi></mrow></msub><msub><mi>B</mi><mrow><mi>h</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">
    L_{ij} = A_{ih}B_{hj}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9694em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ih</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">hj</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></eqn></section></p>
<p>这就是我们熟悉的矩阵乘法公式</p>
<ul>
<li>由二阶张量的并矢分解定义，我们可以自然地导出矩阵论的大部分定义：转置、对称、反对称、迹、行列式、矩阵的逆、特征值</li>
</ul>
<h3 id="%E8%BD%AC%E7%BD%AE" tabindex="-1">转置</h3>
<ul>
<li>转置：满足如下等式的运算<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi mathvariant="bold">L</mi><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">\mathbf L^T</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord mathbf">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></eq>：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mi mathvariant="bold">u</mi><mo>⋅</mo><mi mathvariant="bold">L</mi><mi mathvariant="bold">v</mi></mrow><mo>=</mo><mrow><mi mathvariant="bold">v</mi><mo>⋅</mo><msup><mi mathvariant="bold">L</mi><mi>T</mi></msup><mi mathvariant="bold">u</mi></mrow></mrow><annotation encoding="application/x-tex">\mathbf{u\cdot L v} = \mathbf{v \cdot L^\mathnormal{T} u}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord mathbf">u</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">Lv</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathbf">L</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathbf">u</span></span></span></span></span></eq></li>
<li>上述转置定义的好处是，不依赖向量的正交分解形式，不会将转置运算限定在具体的基底上，说明<em>给定张量的转置是唯一确定的，与选取的基无关</em></li>
<li>当然，如果是笛卡尔坐标系，则容易证明二阶张量的转置运算等效下标交换</li>
</ul>
<h3 id="%E8%BD%A8%E8%BF%B9" tabindex="-1">轨迹</h3>
<ul>
<li>
<p>迹：线性形式<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>r</mi><mo>:</mo><mi>L</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi mathvariant="script">V</mi><mo stretchy="false">)</mo><mo>→</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">tr: Lin(\mathcal V) \to \mathbb R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6151em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span></eq>，满足<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>r</mi><mo stretchy="false">(</mo><mi mathvariant="bold">a</mi><mo>⊗</mo><mi mathvariant="bold">b</mi><mo stretchy="false">)</mo><mo>=</mo><mrow><mi mathvariant="bold">a</mi><mo>⋅</mo><mi mathvariant="bold">b</mi></mrow></mrow><annotation encoding="application/x-tex">tr(\mathbf a \otimes \mathbf b) = \mathbf{a \cdot b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord mathbf">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf">b</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">b</span></span></span></span></span></eq></p>
<ul>
<li>这个定义自然限制了取值是方阵，且容易证明迹等效方阵主对角线的分量之和</li>
<li>且可以证明满足要求的形式是唯一存在的</li>
</ul>
<p>迹是一个张量的本质属性，它的取值与具体选取的基无关</p>
</li>
<li>
<p>迹的重要意义是<strong>在二阶张量上定义内积，从而给出二阶张量空间上的模（距离）</strong></p>
</li>
<li>
<p>推导迹的分量计算法则：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi mathvariant="normal">t</mi><mi>r</mi><mi mathvariant="bold">L</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mtext>（由二阶张量的正交分解）</mtext><mi mathvariant="normal">t</mi><mi>r</mi><mo stretchy="false">(</mo><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⊗</mo><msub><mi mathvariant="bold">e</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mtext>（由线性形式的定义）</mtext><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mi mathvariant="normal">t</mi><mi>r</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⊗</mo><msub><mi mathvariant="bold">e</mi><mi>j</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mtext>（由迹的定义）</mtext><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⋅</mo><msub><mi mathvariant="bold">e</mi><mi>j</mi></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mtext>（由正交基定义）</mtext><msub><mi>L</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>L</mi><mrow><mi>i</mi><mi>i</mi></mrow></msub></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">
  \begin{aligned}
    \mathrm tr \mathbf L &amp;= （由二阶张量的正交分解）\mathrm tr (L_{ij} \mathbf e_i \otimes \mathbf e_j)\\
    &amp;= （由线性形式的定义）L_{ij}\mathrm tr ( \mathbf e_i \otimes \mathbf e_j)\\
    &amp;= （由迹的定义）L_{ij} \mathbf e_i \cdot \mathbf e_j\\
    &amp;= （由正交基定义）L_{ij} \delta_{ij}\\
    &amp;= L_{ii}
  \end{aligned}
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:7.5em;vertical-align:-3.5em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4em;"><span style="top:-6.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathrm">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathbf">L</span></span></span><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-0.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.5em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:4em;"><span style="top:-6.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">（由二阶张量的正交分解）</span><span class="mord mathrm">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">（由线性形式的定义）</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord mathrm">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">（由迹的定义）</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord cjk_fallback">（由正交基定义）</span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0379em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span><span style="top:-0.16em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">L</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ii</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:3.5em;"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section><p>与矩阵的迹是主对角线元素之和的法则吻合</p>
</li>
<li>
<p>标量积/内积</p>
<ul>
<li>
<p>两个词这里同一个意思，都是指一个满足<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi><mo stretchy="false">(</mo><mi mathvariant="bold">A</mi><mo separator="true">,</mo><mi mathvariant="bold">B</mi><mo stretchy="false">)</mo><mo>:</mo><mi>L</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi mathvariant="script">V</mi><mo stretchy="false">)</mo><mo>×</mo><mi>L</mi><mi>i</mi><mi>n</mi><mo stretchy="false">(</mo><mi mathvariant="script">V</mi><mo stretchy="false">)</mo><mo>→</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\omega(\mathbf A, \mathbf B): Lin(\mathcal V) \times Lin(\mathcal V) \to \mathbb R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord mathbf">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">B</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">L</span><span class="mord mathnormal">in</span><span class="mopen">(</span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span></eq>的<em>映射到标量的正定、可交换、对称双线性形式</em>（可以发现，这个要求跟向量内积几乎一致）</p>
</li>
<li>
<p>从迹诱导的<strong>二阶张量内积定义</strong>：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">A</mi><mo>⋅</mo><mi mathvariant="bold">B</mi><mo>=</mo><mi mathvariant="normal">t</mi><mi>r</mi><mo stretchy="false">(</mo><msup><mi mathvariant="bold">A</mi><mi>T</mi></msup><mi mathvariant="bold">B</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
        \mathbf A \cdot \mathbf B = \mathrm tr(\mathbf A^T \mathbf B)
    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">B</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mord mathrm">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathbf">B</span><span class="mclose">)</span></span></span></span></span></eqn></section></li>
<li>
<p>容易验证上述定义的内积确实是正定、可交换、对称双线性的</p>
</li>
<li>
<p>更妙的是，这个内积跟向量内积是兼容的，也即可以将二阶张量替换成向量的并矢形式后直接运算</p>
</li>
<li>
<p>该内积的分量计算式：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.25em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mi mathvariant="bold">A</mi><mo>⋅</mo><mi mathvariant="bold">B</mi></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mi mathvariant="normal">t</mi><mi>r</mi><mo stretchy="false">(</mo><msup><mi mathvariant="bold">A</mi><mi>T</mi></msup><mi mathvariant="bold">B</mi><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><mo stretchy="false">(</mo><msup><mi mathvariant="bold">A</mi><mi>T</mi></msup><mi mathvariant="bold">B</mi><msub><mo stretchy="false">)</mo><mrow><mi>i</mi><mi>i</mi></mrow></msub></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>B</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">
        \begin{aligned}
            \mathbf A \cdot \mathbf B &amp;= \mathrm tr(\mathbf A^T \mathbf B) \\
            &amp;= (\mathbf A^T \mathbf B)_{ii}\\
            &amp;= A_{ij} B_{ij}
        \end{aligned}
    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:4.6027em;vertical-align:-2.0513em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5513em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathbf">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">B</span></span></span><span style="top:-3.1087em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span><span style="top:-1.6087em;"><span class="pstrut" style="height:3em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.0513em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.5513em;"><span style="top:-4.66em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathrm">t</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathbf">B</span><span class="mclose">)</span></span></span><span style="top:-3.1087em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span><span class="mord mathbf">B</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ii</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-1.6087em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0502em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.0513em;"><span></span></span></span></span></span></span></span></span></span></span></span></eqn></section><p>文字描述就是，对两个矩阵执行“按元素乘法”然后求和。可以发现这个算法可以理解为把矩阵“展平”成向量后执行向量内积的做法</p>
</li>
<li>
<p>有了上述的定义，容易导出二阶张量欧式模的定义以及两个二阶张量的欧式距离的定义</p>
</li>
<li>
<p><strong>上述定义可以无缝迁移到任意阶张量用于定义任意阶张量空间的欧式距离</strong></p>
</li>
</ul>
</li>
</ul>
<h3 id="%E8%A1%8C%E5%88%97%E5%BC%8F" tabindex="-1">行列式</h3>
<ul>
<li>
<p>考虑反对称三线性形式<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi><mo>:</mo><mrow><mi mathvariant="script">V</mi><mo>×</mo><mi mathvariant="script">V</mi><mo>×</mo><mi mathvariant="script">V</mi></mrow><mo>→</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\omega: \mathcal{V \times V \times V} \to \mathbb R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span></eq>，反对称三线性意味着<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mo>⋅</mo></mrow><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>ω</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mo>⋅</mo><mo separator="true">,</mo><mi mathvariant="bold">w</mi></mrow><mo stretchy="false">)</mo><mo separator="true">,</mo><mi>ω</mi><mo stretchy="false">(</mo><mrow><mo>⋅</mo><mo separator="true">,</mo><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mi mathvariant="bold">w</mi></mrow><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\omega(\mathbf{u, v, \cdot}), \omega(\mathbf{u, \cdot, w}), \omega(\mathbf{\cdot, v, w})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">⋅</span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">⋅</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span><span class="mclose">)</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord">⋅</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span><span class="mclose">)</span></span></span></span></eq>都是双线性形式，且满足：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>ω</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mi mathvariant="bold">w</mi></mrow><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mi>ω</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">w</mi></mrow><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mi>ω</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">w</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi></mrow><mo stretchy="false">)</mo><mo>=</mo><mo>−</mo><mi>ω</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">w</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mi mathvariant="bold">u</mi></mrow><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
      \omega(\mathbf{u, v, w}) = -\omega(\mathbf{v, u, w}) = -\omega(\mathbf{u,w,v}) = -\omega(\mathbf{w,v,u})
    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">−</span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">u</span></span><span class="mclose">)</span></span></span></span></span></eqn></section></li>
<li>
<p>给定二阶张量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi></mrow><annotation encoding="application/x-tex">\mathbf L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">L</span></span></span></span></eq>和某三线性对称形式，可以构造一个新的形式<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>ω</mi><mi mathvariant="bold">L</mi></msub><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mi mathvariant="bold">w</mi></mrow><mo stretchy="false">)</mo><mo>=</mo><mi>ω</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">L</mi><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">L</mi><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mi mathvariant="bold">L</mi><mi mathvariant="bold">w</mi></mrow><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\omega_{\mathbf L}(\mathbf{u,v,w}) = \omega(\mathbf{Lu,Lv,Lw})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3303em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">Lu</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">Lv</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">Lw</span></span><span class="mclose">)</span></span></span></span></eq></p>
</li>
<li>
<p>容易证明向量空间的反对称三线性形式也构成一个向量空间，记作<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Ω</mi></mrow><annotation encoding="application/x-tex">\Omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord">Ω</span></span></span></span></eq>，可以证明<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">d</mi><mi>i</mi><mi>m</mi><mo stretchy="false">(</mo><mi mathvariant="normal">Ω</mi><mo stretchy="false">)</mo><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\mathrm dim(\Omega) = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathrm">d</span><span class="mord mathnormal">im</span><span class="mopen">(</span><span class="mord">Ω</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></eq>，则对于<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi></mrow><annotation encoding="application/x-tex">\mathbf L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">L</span></span></span></span></eq>总存在<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mi mathvariant="bold">L</mi></msub><mo>∈</mo><mi mathvariant="double-struck">R</mi></mrow><annotation encoding="application/x-tex">\lambda_{\mathbf L} \in \mathbb R</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3303em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">∈</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">R</span></span></span></span></eq>满足有如下等式成立：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>ω</mi><mi mathvariant="bold">L</mi></msub><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mi mathvariant="bold">w</mi></mrow><mo stretchy="false">)</mo><mo>=</mo><mi>ω</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">L</mi><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">L</mi><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mi mathvariant="bold">L</mi><mi mathvariant="bold">w</mi></mrow><mo stretchy="false">)</mo><mo>=</mo><msub><mi>λ</mi><mi mathvariant="bold">L</mi></msub><mi>ω</mi><mo stretchy="false">(</mo><mrow><mi mathvariant="bold">u</mi><mo separator="true">,</mo><mi mathvariant="bold">v</mi><mo separator="true">,</mo><mi mathvariant="bold">w</mi></mrow><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
      \omega_{\mathbf L}(\mathbf{u,v,w}) = \omega(\mathbf{Lu,Lv,Lw}) = \lambda_{\mathbf L} \omega(\mathbf{u,v,w})
    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3303em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">Lu</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">Lv</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">Lw</span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3303em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathbf mtight">L</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">u</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">w</span></span><span class="mclose">)</span></span></span></span></span></eqn></section></li>
<li>
<p>上述等式中的实数<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>λ</mi><mi mathvariant="bold">L</mi></msub></mrow><annotation encoding="application/x-tex">\lambda_\mathbf{L}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3303em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">L</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq>就是<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi></mrow><annotation encoding="application/x-tex">\mathbf L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">L</span></span></span></span></eq>的<em>行列式</em></p>
</li>
<li>
<p>行列式<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">d</mi><mi>e</mi><mi>t</mi><mi mathvariant="bold">L</mi></mrow><annotation encoding="application/x-tex">\mathrm det \mathbf L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathrm">d</span><span class="mord mathnormal">e</span><span class="mord mathnormal">t</span><span class="mord mathbf">L</span></span></span></span></eq>的重要意义在于它是张量的<em>本质属性</em>，取值只与张量相关，与张量选取的基无关、与上述定义中选取的线性形式<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ω</mi></mrow><annotation encoding="application/x-tex">\omega</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">ω</span></span></span></span></eq>也无关</p>
</li>
<li>
<p>行列式也跟判断向量组线性无关、矩阵奇异性、可逆性等密切相关</p>
</li>
</ul>
<h3 id="%E7%89%B9%E5%BE%81%E5%80%BC" tabindex="-1">特征值</h3>
<ul>
<li>
<p>跟矩阵论的定义没有出入，就是满足如下方程的实数和向量：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">L</mi><mi mathvariant="bold">v</mi><mo>=</mo><mi>λ</mi><mi mathvariant="bold">v</mi></mrow><annotation encoding="application/x-tex">
      \mathbf{Lv = \mathnormal{\lambda}v}
    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">Lv</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathnormal">λ</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span></span></span></span></span></eqn></section></li>
<li>
<p>结合二阶张量基只有最有意思的结论之一，对于对称二阶张量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">L</mi></mrow><annotation encoding="application/x-tex">\mathbf L</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">L</span></span></span></span></eq>和它的特征值/特征向量有如下分解：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">L</mi><mo>=</mo><msub><mi>λ</mi><mi>i</mi></msub><msub><mi mathvariant="bold">e</mi><mi>i</mi></msub><mo>⊗</mo><msub><mi mathvariant="bold">e</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">
      \mathbf L = \lambda_i \mathbf e_i \otimes \mathbf e_j
    </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">L</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">λ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7305em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathbf">e</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></eqn></section></li>
<li>
<p>另外一个有意思的结论：张量积交换的充要条件：coaxial，意思是共享同一组正交基</p>
</li>
</ul>
<h3 id="%E5%8F%89%E7%A7%AF" tabindex="-1">叉积</h3>
<ul>
<li>
<p>构建反对称向量和反对称矩阵的同构</p>
<ul>
<li>在三维向量空间中，我们可以证明任意一个向量可以与一个三维二阶的反对称张量一一对应，从而构成了一个反对称二阶张量和向量的同构。反对称二阶张量称为<em>skew tensor</em>，它对应的向量就称为<em>skew vector</em></li>
</ul>
</li>
<li>
<p>定义叉积</p>
<p>三维向量空间中任取向量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">a</mi><mo separator="true">,</mo><mi mathvariant="bold">b</mi></mrow><annotation encoding="application/x-tex">\mathbf{a, b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathbf">a</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">b</span></span></span></span></span></eq>，定义叉积运算<br>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">a</mi><mo>×</mo><mi mathvariant="bold">b</mi><mo>=</mo><msub><mi mathvariant="bold">W</mi><mi mathvariant="bold">a</mi></msub><mi mathvariant="bold">b</mi></mrow><annotation encoding="application/x-tex">
  \mathbf{a \times b = W_a b}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1611em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord mathbf">b</span></span></span></span></span></span></eqn></section></p>
<p>其中<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="bold">W</mi><mi>a</mi></msub></mrow><annotation encoding="application/x-tex">\mathbf W_a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8361em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq>是向量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">a</mi></mrow><annotation encoding="application/x-tex">\mathbf a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathbf">a</span></span></span></span></eq>的对应的skew tensor</p>
<p>容易说明叉积是反对称双线性形式</p>
</li>
<li>
<p>叉积导出的重要结论</p>
<ul>
<li>向量平行条件：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">a</mi><mo>×</mo><mi mathvariant="bold">b</mi><mo>=</mo><mi mathvariant="bold">o</mi></mrow><annotation encoding="application/x-tex">\mathbf{a \times b = o}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathbf">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">o</span></span></span></span></span></eq></li>
<li>叉积向量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">a</mi><mo>×</mo><mi mathvariant="bold">b</mi></mrow><annotation encoding="application/x-tex">\mathbf{a \times b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathbf">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">b</span></span></span></span></span></eq>是张量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">b</mi><mo>⊗</mo><mi mathvariant="bold">a</mi><mo>−</mo><mi mathvariant="bold">a</mi><mo>⊗</mo><mi mathvariant="bold">b</mi></mrow><annotation encoding="application/x-tex">\mathbf{b \otimes a - a \otimes b}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathbf">b</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">a</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">b</span></span></span></span></span></eq>的轴向向量</li>
</ul>
</li>
</ul>
<h2 id="%E5%BC%A0%E9%87%8F%E5%88%86%E6%9E%90%E7%AE%80%E8%BF%B0" tabindex="-1">张量分析简述</h2>
<ul>
<li>考虑到n阶张量上我们都定义了内积和模，所以这些张量空间自然地满足度量空间的要求，从而自然有了距离的定义并使用距离来将实数上的分析学定义迁移到张量空间上</li>
<li>场论
<ul>
<li>场：定义域是点空间的子集（而不是实数的子集）的标量/向量/张量映射</li>
<li>典型的场：梯度场是对给定标量场构造的一个向量场</li>
</ul>
</li>
<li>（待完善）自变量和因变量都是高阶张量的情况
<ul>
<li>仅就欧式空间笛卡尔坐标系来说，这种求导运算会得到高阶的张量</li>
</ul>
</li>
<li>在机器学习中，我们试图对张量的张量函数做求导的动机基本上都是获得梯度，所以这里实际上关心的是场的全微分形式，如考虑<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">f</mi><mo>:</mo><mi mathvariant="script">V</mi><mo>→</mo><mi mathvariant="script">V</mi></mrow><annotation encoding="application/x-tex">\mathbf f: \mathcal V \to \mathcal V</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">:</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathcal" style="margin-right:0.08222em;">V</span></span></span></span></eq>，它的全微分形式：</li>
</ul>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo><mo>+</mo><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo><mi mathvariant="bold">Δ</mi><mi mathvariant="bold">v</mi><mo>+</mo><mi mathvariant="bold">o</mi><mo stretchy="false">(</mo><mi mathvariant="bold">Δ</mi><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
    \mathbf{f(v) = f(v_0) + Df(v_0)\Delta v + o(\Delta v)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf" style="margin-right:0.10903em;">Df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord mathbf" style="margin-right:0.01597em;">Δv</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">o</span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">Δv</span><span class="mclose">)</span></span></span></span></span></span></eqn></section><p>其中我们关心的量其实是<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf {Df(v_0)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></eq>其实就是一个张量场<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi mathvariant="bold">f</mi></mrow><annotation encoding="application/x-tex">grad \mathbf f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord mathbf" style="margin-right:0.10903em;">f</span></span></span></span></eq>在<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi mathvariant="bold">v</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">\mathbf v_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5944em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></eq>的取值，也即此时的“导数”其实是一个二阶张量</p>
<h2 id="%E5%85%B3%E4%BA%8E%E5%BC%A0%E9%87%8F%E3%80%81%E7%BA%BF%E6%80%A7%E3%80%81%E5%BE%AE%E5%88%86%E3%80%81%E5%87%BD%E6%95%B0%E4%B9%8B%E9%97%B4%E7%9A%84%E5%85%B3%E7%B3%BB%E7%9A%84%E6%80%9D%E8%80%83%EF%BC%88%E8%83%A1%E6%89%AF%EF%BC%89" tabindex="-1">关于张量、线性、微分、函数之间的关系的思考（胡扯）</h2>
<p>考虑二元函数的微分表达式：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>y</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo>+</mo><mi>A</mi><mi mathvariant="normal">Δ</mi><mi>x</mi><mo>+</mo><mi>B</mi><mi mathvariant="normal">Δ</mi><mi>y</mi><mo>+</mo><mi>o</mi><mo stretchy="false">(</mo><msqrt><mrow><mi mathvariant="normal">Δ</mi><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><mi mathvariant="normal">Δ</mi><msup><mi>y</mi><mn>2</mn></msup></mrow></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
    f(x,y) = f(x_0, y_0) + A\Delta x + B\Delta y + o(\sqrt{\Delta x^2 + \Delta y^2})
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.0359em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">A</span><span class="mord">Δ</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8778em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord">Δ</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2567em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0067em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">Δ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7401em;"><span style="top:-2.989em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span><span style="top:-2.9667em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg xmlns="http://www.w3.org/2000/svg" width="400em" height="1.28em" viewBox="0 0 400000 1296" preserveAspectRatio="xMinYMin slice"><path d="M263,681c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l0 -0
c4.7,-7.3,11,-11,19,-11
H40000v40H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M1001 80h400000v40h-400000z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2333em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></eqn></section><p>把自变量改写成二维向量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">v</mi></mrow><annotation encoding="application/x-tex">\mathbf v</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4444em;"></span><span class="mord mathbf" style="margin-right:0.01597em;">v</span></span></span></span></eq>：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>f</mi><mo stretchy="false">(</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo>+</mo><mrow><mi mathvariant="bold">d</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo></mrow><mtext> </mtext><mi mathvariant="normal">Δ</mi><mi mathvariant="bold">v</mi><mo>+</mo><mi>o</mi><mo stretchy="false">(</mo><mi mathvariant="normal">∣</mi><mi mathvariant="normal">Δ</mi><mi mathvariant="bold">v</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
    f(\mathbf v) = f(\mathbf v_0) + \mathbf{df(v_0)}\ \Delta \mathbf v + o(|\Delta \mathbf v|)
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace"> </span><span class="mord">Δ</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">o</span><span class="mopen">(</span><span class="mord">∣Δ</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mord">∣</span><span class="mclose">)</span></span></span></span></span></eqn></section><p>其中：<br>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi mathvariant="bold">d</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo></mrow><mo>=</mo><mi>g</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mi>g</mi><mi>r</mi><mi>a</mi><mi>d</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn>0</mn></msub><mo stretchy="false">)</mo><mo>=</mo><mo stretchy="false">[</mo><mi>A</mi><mo separator="true">,</mo><mi>B</mi><msup><mo stretchy="false">]</mo><mi>T</mi></msup></mrow><annotation encoding="application/x-tex">
  \mathbf{df(v_0)} = grad \mathbf f(\mathbf v_0)\\
  grad \mathbf f(\mathbf v_0) = [A, B]^T
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mord mathnormal">a</span><span class="mord mathnormal">d</span><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">A</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span></span></span></span></span></span></span></span></eqn></section></p>
<p>因此可以认为标量场的微分<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">d</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{df(v_0)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></eq>是一阶张量场（梯度场）。其中，梯度场中的向量可以认为存在这样的结构：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi mathvariant="bold">d</mi><mi mathvariant="bold">f</mi></mrow><mo>=</mo><mi>A</mi><mrow><mi mathvariant="bold">d</mi><mi mathvariant="bold">x</mi></mrow><mo>+</mo><mi>B</mi><mrow><mi mathvariant="bold">d</mi><mi mathvariant="bold">y</mi></mrow></mrow><annotation encoding="application/x-tex">
    \mathbf{df} = A\mathbf{dx} + B\mathbf{dy}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">df</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">A</span><span class="mord"><span class="mord mathbf">dx</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05017em;">B</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">dy</span></span></span></span></span></span></eqn></section><p>也即，<strong>对于标量场，给定点的一阶微分其实是一个二维向量空间中的向量</strong>，该空间的基底<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">d</mi><mi mathvariant="bold">x</mi></mrow><annotation encoding="application/x-tex">\mathbf{dx}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf">dx</span></span></span></span></span></eq>和<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">d</mi><mi mathvariant="bold">y</mi></mrow><annotation encoding="application/x-tex">\mathbf{dy}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">dy</span></span></span></span></span></eq>是二维空间中单位正交的向量。</p>
<p>另外，由此可以确定微分和自变量变化量之间的乘法用的是<em>张量积</em></p>
<p>考虑向量场<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf f(\mathbf v)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span></span></span></span></eq>，类比写出微分形式：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><mi mathvariant="bold">v</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo><mo>+</mo><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo></mrow><mtext> </mtext><mi mathvariant="bold">Δ</mi><mi mathvariant="bold">v</mi><mo>+</mo><mi mathvariant="bold">o</mi><mo stretchy="false">(</mo><mi mathvariant="bold">∣</mi><mi mathvariant="bold">Δ</mi><mi mathvariant="bold">v</mi><mi mathvariant="bold">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
    \mathbf{f( v) = f(\mathbf v_0) + \mathbf{Df(v_0)}\ \Delta \mathbf v + o(|\Delta \mathbf v|)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace"> </span><span class="mord mathbf" style="margin-right:0.01597em;">Δv</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">o</span><span class="mopen">(</span><span class="mord mathbf">∣Δv∣</span><span class="mclose">)</span></span></span></span></span></span></eqn></section><p>此时<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Df(v_0)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></eq>只能是一个二阶张量。虽然对于向量表达式我们似乎没法使用“除法”和极限来计算无穷小，但考虑到微分和二阶张量的定义，微分这个“映射”只能是等价一个二阶张量。- 其实，考虑到我们建立分析学利用的是模和度量（比如说无穷小用的是向量的模的无穷小），所以两端除以向量的模长然后求极限就完事了</p>
<p>只考虑笛卡尔坐标系，根据矩乘法则并将向量场拆解为多个标量场，容易得到<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">v</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Df(v_0)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.016em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></eq>的矩阵表达式。其中<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><msub><mi>f</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><msub><mi>f</mi><mi>i</mi></msub></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi>v</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">Df_{ij} = \frac{\partial f_i}{\partial v_j}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.4745em;vertical-align:-0.5423em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9322em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.0359em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2819em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4461em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight" style="margin-right:0.05556em;">∂</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3281em;"><span style="top:-2.357em;margin-left:-0.1076em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.5423em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></eq>，如果是经典的列布局，则相当于把向量场拆成多个标量场的线性组合后，将每个标量场的梯度当作行向量拼起来</p>
<p>（猜测）写作爱因斯坦求和就是：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi></mrow><mo>=</mo><msub><mi>f</mi><mrow><mi>i</mi><mo separator="true">,</mo><mi>j</mi></mrow></msub><mi>d</mi><msub><mi>x</mi><mi>i</mi></msub><mo>⊗</mo><mi>d</mi><msub><mi>x</mi><mi>j</mi></msub></mrow><annotation encoding="application/x-tex">
    \mathbf{Df} = f_{i,j} dx_i\otimes dx_j
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span></span></eqn></section><p>进一步考虑二阶张量函数对二阶张量求梯度，对张量函数<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{f(X)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord mathbf">X</span><span class="mclose">)</span></span></span></span></span></eq>写出微分表达式：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">X</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo><mo>+</mo><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">X</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo></mrow><mtext> </mtext><mi mathvariant="bold">Δ</mi><mi mathvariant="bold">X</mi><mo>+</mo><mi mathvariant="bold">o</mi><mo stretchy="false">(</mo><mi mathvariant="bold">∣</mi><mi mathvariant="bold">Δ</mi><mi mathvariant="bold">X</mi><mi mathvariant="bold">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">
    \mathbf{f( X) = f(\mathbf X_0) + \mathbf{Df(X_0)}\ \Delta \mathbf X + o(|\Delta \mathbf X|)}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord mathbf">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="mspace"> </span><span class="mord mathbf">ΔX</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">o</span><span class="mopen">(</span><span class="mord mathbf">∣ΔX∣</span><span class="mclose">)</span></span></span></span></span></span></eqn></section><p>根据微分的定义（线性算子）和四阶张量的定义，<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><msub><mi mathvariant="bold">X</mi><mn mathvariant="bold">0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{Df(X_0)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></eq>会是一个四阶张量，且立刻有如下的表达式：<br>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>D</mi><msub><mi>f</mi><mrow><mi>i</mi><mi>j</mi><mi>k</mi><mi>l</mi></mrow></msub><mo>=</mo><mfrac><mrow><mi mathvariant="normal">∂</mi><msub><mi>f</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><mrow><mi mathvariant="normal">∂</mi><msub><mi>X</mi><mrow><mi>k</mi><mi>l</mi></mrow></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">
    Df_{ijkl} = \frac{\partial f_{ij}}{\partial X_{kl}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">ijk</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.2074em;vertical-align:-0.836em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.0785em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord" style="margin-right:0.05556em;">∂</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.836em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></eqn></section></p>
<p>（猜测）写作爱因斯坦求和就是：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi></mrow><mo>=</mo><msub><mi>f</mi><mrow><mi>i</mi><mi>j</mi><mo separator="true">,</mo><mi>k</mi><mi>l</mi></mrow></msub><mi>d</mi><msub><mi>x</mi><mi>i</mi></msub><mo>⊗</mo><mi>d</mi><msub><mi>x</mi><mi>j</mi></msub><mo>⊗</mo><mi>d</mi><msub><mi>x</mi><mi>k</mi></msub><mo>⊗</mo><mi>d</mi><msub><mi>x</mi><mi>l</mi></msub></mrow><annotation encoding="application/x-tex">
    \mathbf{Df} = f_{ij, kl} dx_i\otimes dx_j \otimes dx_k \otimes dx_l
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:-0.1076em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">ij</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9805em;vertical-align:-0.2861em;"></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2861em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8444em;vertical-align:-0.15em;"></span><span class="mord mathnormal">d</span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></eqn></section><p>事实上，<em>四阶张量不能像二阶张量那样组织成矩阵书写</em>，所以矩阵对矩阵的求导才不好书写。当然，现在也折腾出了所谓“分子布局”“分母布局”这些东西强行把它写出来。对于计算机，则没有这些问题，因为n阶张量对应的n维数组在计算机里都被存储为了一维数组。</p>
<p>一个有意思的猜测：<em>对于n阶微分所在的张量空间，空间的基底恰好是底层的点空间的基底的并矢构成的，就像我们前面看的教程里那样构造，对于二维空间就是类似<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>x</mi><mo>⊗</mo><mi>d</mi><mi>y</mi></mrow><annotation encoding="application/x-tex">dx \otimes dy</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⊗</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">d</span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span></span></span></span></eq>的底作为Heissian矩阵的基</em></p>
<p>有了知其然也知其所以然的张量求导术，我们可以回头看一些经典的矩阵表达式求导。</p>
<p>首先可以证明如下结论：<em>任意阶张量的内积、叉积、张量积、并矢运算的求导法则都有类似标量求导的乘积法则</em></p>
<p>然后将微分记号d看作一个运算，按照它的线性性质，可以正常做很多四则运算。</p>
<p>考虑如下例子：</p>
<p>张量场<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">f</mi><mo stretchy="false">(</mo><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo><mo>=</mo><msup><mi mathvariant="bold">X</mi><mi mathvariant="normal">T</mi></msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf{f(X) = X^\mathrm{T}AX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0913em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">f</span><span class="mopen">(</span><span class="mord mathbf">X</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord"><span class="mord mathbf">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf">AX</span></span></span></span></span></eq>关于<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">X</span></span></span></span></eq>求微分，有：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi><mo>=</mo><mi mathvariant="bold">D</mi><mo stretchy="false">(</mo><msup><mi mathvariant="bold">X</mi><mi mathvariant="normal">T</mi></msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">D</mi><mo stretchy="false">(</mo><msup><mi mathvariant="bold">X</mi><mi mathvariant="normal">T</mi></msup><mi mathvariant="bold">A</mi><mo stretchy="false">)</mo><mi mathvariant="bold">X</mi><mo>+</mo><msup><mi mathvariant="bold">X</mi><mi mathvariant="normal">T</mi></msup><mi mathvariant="bold">A</mi><mtext> </mtext><mi mathvariant="bold">D</mi><mi mathvariant="bold">X</mi><mo>=</mo><mn mathvariant="bold">2</mn><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mtext> </mtext><mi mathvariant="bold">D</mi><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">
    \mathbf{Df = D(X^\mathrm{T}AX) = D(X^\mathrm{T}A)X+X^\mathrm{T}A\ DX = 2AX\ DX}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1413em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">D</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf">AX</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">D</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf">A</span><span class="mclose">)</span><span class="mord mathbf">X</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mord mathbf">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8913em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathrm mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf">A</span><span class="mspace"> </span><span class="mord mathbf">DX</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">2AX</span><span class="mspace"> </span><span class="mord mathbf">DX</span></span></span></span></span></span></eqn></section><p>（可以说明<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mo stretchy="false">(</mo><msup><mi mathvariant="bold">X</mi><mi mathvariant="bold">T</mi></msup><mo stretchy="false">)</mo><mo>=</mo><mi mathvariant="bold">D</mi><mo stretchy="false">(</mo><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{D(X^T) = D(X)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0933em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">D</span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8433em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mord mathbf">D</span><span class="mopen">(</span><span class="mord mathbf">X</span><span class="mclose">)</span></span></span></span></span></eq>）</p>
<p>上述符号的理解：</p>
<ul>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi><mo separator="true">,</mo><mi mathvariant="bold">D</mi><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf{Df, DX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathbf">DX</span></span></span></span></span></eq>都是四阶张量，且笛卡尔坐标系下<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf{DX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord mathbf">DX</span></span></span></span></span></eq>是四阶单位张量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="double-struck">I</mi></mrow><annotation encoding="application/x-tex">\mathbb I</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6889em;"></span><span class="mord mathbb">I</span></span></span></span></eq>。</li>
<li><eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="bold">2</mn><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mtext> </mtext><mi mathvariant="bold">D</mi><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf{ 2AX\ DX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord mathbf">2AX</span><span class="mspace"> </span><span class="mord mathbf">DX</span></span></span></span></span></eq>看起来并不是良定义的，因为我们没有对四阶张量关于二阶张量的“右乘”做定义。但考虑到<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">f</mi></mrow><annotation encoding="application/x-tex">\mathbf{Df}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.10903em;">Df</span></span></span></span></span></eq>总是将一个二阶张量<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">Δ</mi><mi>X</mi></mrow><annotation encoding="application/x-tex">\mathbf \Delta X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">Δ</span><span class="mord mathnormal" style="margin-right:0.07847em;">X</span></span></span></span></eq>映射到一个二阶张量，所以这个表达式可以这样理解：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf{DX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord mathbf">DX</span></span></span></span></span></eq>是所谓的“度量张量”，对于平直时空，这个映射等效<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="bold">2</mn><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mi mathvariant="bold">Δ</mi><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf{2AX\Delta X}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord"><span class="mord mathbf">2AXΔX</span></span></span></span></span></eq>，这样就是良定义的了。</li>
</ul>
<p>例2（最小二乘法正规方程）：对<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">∣</mi><mi mathvariant="bold">y</mi><mo>−</mo><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mi mathvariant="bold">∣</mi></mrow><annotation encoding="application/x-tex">\mathbf{|y - AX|}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf" style="margin-right:0.01597em;">∣y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">AX∣</span></span></span></span></span></eq>关于<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf X</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6861em;"></span><span class="mord mathbf">X</span></span></span></span></eq>求梯度。</p>
<p>等价与求标量场<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi mathvariant="bold">y</mi><mo>−</mo><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mi mathvariant="bold">y</mi><mo>−</mo><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathbf{(y- AX)\cdot (y-AX)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">AX</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">AX</span><span class="mclose">)</span></span></span></span></span></eq>的梯度</p>
<p>根据张量数量积的乘积法则，可知<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">D</mi><mo stretchy="false">[</mo><mo stretchy="false">(</mo><mi mathvariant="bold">y</mi><mo>−</mo><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo><mo>⋅</mo><mo stretchy="false">(</mo><mi mathvariant="bold">y</mi><mo>−</mo><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mo>=</mo><mo stretchy="false">[</mo><mo>−</mo><mi mathvariant="bold">A</mi><mo>⋅</mo><mo stretchy="false">(</mo><mi mathvariant="bold">y</mi><mo>−</mo><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo><mo>−</mo><mo stretchy="false">(</mo><mi mathvariant="bold">y</mi><mo>−</mo><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mo stretchy="false">)</mo><mo>⋅</mo><mi mathvariant="bold">A</mi><mo stretchy="false">]</mo><mi mathvariant="bold">D</mi><mi mathvariant="bold">X</mi><mo>=</mo><mo stretchy="false">(</mo><mn mathvariant="bold">2</mn><msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">T</mi></msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mo>−</mo><mn mathvariant="bold">2</mn><msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">T</mi></msup><mi mathvariant="bold">y</mi><mo stretchy="false">)</mo><mtext> </mtext><mi mathvariant="bold">D</mi><mi mathvariant="bold">X</mi></mrow><annotation encoding="application/x-tex">\mathbf{D[(y- AX)\cdot (y-AX)] = [-A\cdot (y-AX)-(y-AX)\cdot A]DX = (2A^TAX-2A^Ty)\ DX}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0933em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">D</span><span class="mopen">[(</span><span class="mord mathbf" style="margin-right:0.01597em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">AX</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">AX</span><span class="mclose">)]</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">[</span><span class="mord">−</span><span class="mord mathbf">A</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">AX</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathbf" style="margin-right:0.01597em;">y</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">AX</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">A</span><span class="mclose">]</span><span class="mord mathbf">DX</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord mathbf">2</span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8433em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf">AX</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">2</span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8433em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf" style="margin-right:0.01597em;">y</span><span class="mclose">)</span><span class="mspace"> </span><span class="mord mathbf">DX</span></span></span></span></span></eq></p>
<p>可知梯度为：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn mathvariant="bold">2</mn><msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">T</mi></msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">X</mi><mo>−</mo><mn mathvariant="bold">2</mn><msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">T</mi></msup><mi mathvariant="bold">y</mi></mrow><annotation encoding="application/x-tex">\mathbf {2A^TAX-2A^Ty}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0377em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathbf">2</span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8433em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf">AX</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord mathbf">2</span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8433em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf" style="margin-right:0.01597em;">y</span></span></span></span></span></eq>，令梯度为0得到：<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="bold">X</mi><mo>=</mo><mo stretchy="false">(</mo><msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">T</mi></msup><mi mathvariant="bold">A</mi><msup><mo stretchy="false">)</mo><mrow><mo>−</mo><mn mathvariant="bold">1</mn></mrow></msup><msup><mi mathvariant="bold">A</mi><mi mathvariant="bold">T</mi></msup><mi mathvariant="bold">y</mi></mrow><annotation encoding="application/x-tex">\mathbf{X=(A^TA)^{-1}A^Ty}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.0933em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathbf">X</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8433em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf">A</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">−</span><span class="mord mathbf mtight">1</span></span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathbf">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8433em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathbf mtight">T</span></span></span></span></span></span></span></span><span class="mord mathbf" style="margin-right:0.01597em;">y</span></span></span></span></span></eq>，就是线性模型的OLS正规方程解，由此也容易导出非方阵矩阵的彭罗斯伪逆公式</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/0/" class="post-title-link" itemprop="url">基于Haskell的函数式入门随笔</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-09-22 14:35:43" itemprop="dateCreated datePublished" datetime="2024-09-22T14:35:43+08:00">2024-09-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-09 01:13:00" itemprop="dateModified" datetime="2024-10-09T01:13:00+08:00">2024-10-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E5%9F%BA%E4%BA%8Ehaskell%E7%9A%84%E5%87%BD%E6%95%B0%E5%BC%8F%E5%85%A5%E9%97%A8%E9%9A%8F%E7%AC%94" tabindex="-1">基于Haskell的函数式入门随笔</h1>
<p>FP这块的一些关键词：</p>
<ul>
<li><em>Pure Function</em>：纯函数，没有副作用的函数，可以精确地映射到lambda算子上</li>
<li><em>Type System</em>：类型系统，现代函数式语言往往配合强大的类型使用。这样的类型系统往往并不将复合类型/容器类型内置在语言中，而是使用类型系统的复合来严格定义，这跟一般变成语言很不一样</li>
<li><em>Monad</em>：单子，范畴论的术语，函数式语言中用来支持副作用、</li>
<li><em>First-Class Function</em>：函数式里函数是一级成员，函数类型和普通类型的对等的抽象概念。这也说明高阶函数（返回函数的函数，输入函数的函数）会经常出现</li>
<li><em>Curry</em>：柯里化，纯函数有且只有一个入参和一个出参，curry化是指通过返回函数的纯函数来变相实现多入参的纯函数</li>
</ul>
<p>FP的好处</p>
<ul>
<li>数学对应：无副作用，容易转换为数据证明，所以容易分析和形式化证明</li>
<li>Lazy：由于是Pure，所以无副作用的数据计算理论上可以延迟到真正使用的时刻</li>
<li>容易并行：无副作用意味着求值顺序很多时候是任意的，很适合并行</li>
<li>优化潜力：逻辑高度抽象，没有指明硬件细节，理论上足够强大的编译器可以生成跟过程式语言一样的高效字节码，且因为无副作用优化潜力更大</li>
</ul>
<h2 id="haskell%E8%AF%AD%E6%B3%95%E7%AC%94%E8%AE%B0" tabindex="-1">Haskell语法笔记</h2>
<ul>
<li>
<p>注释</p>
<ul>
<li>单行注释：双横杠<code>--</code></li>
</ul>
</li>
<li>
<p>类型声明：双冒号，比如<code>myNumber :: Int</code></p>
</li>
<li>
<p>赋值：没有赋值，使用<code>a = b</code>给表达式b起一个别名a</p>
</li>
<li>
<p>函数定义与调用：基于Lambda算子的书写</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Sqare</span> :: <span class="type">Int</span> -&gt; <span class="type">Int</span></span><br><span class="line"><span class="type">Sqare</span> x = x*x</span><br><span class="line"><span class="title">result</span> = <span class="type">Sqare</span> <span class="number">32</span>  </span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>纯函数符号<code>-&gt;</code>在类型书写中是个右结合的运算符，也即<code>String -&gt; Int -&gt; int</code>等效<code>String -&gt; (Int -&gt; Int)</code></li>
<li>“调用”函数不需要书写括号，一对没有内容的括号通常表示“空表达式”</li>
</ul>
</li>
<li>
<p>Curry化</p>
  <figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">times</span>::<span class="type">Int</span>-&gt;<span class="type">Int</span>-&gt;<span class="type">Int</span></span><br><span class="line"><span class="title">times</span> x y = x * y</span><br><span class="line"><span class="title">result</span> = times <span class="number">3</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- times x y = x * y是如下原语书写的语法糖</span></span><br><span class="line"><span class="title">timesX</span>::<span class="type">Int</span>-&gt;<span class="type">Int</span></span><br><span class="line"><span class="title">timesX</span> x = y -&gt; x * y</span><br><span class="line"><span class="title">times</span> = (<span class="type">TimesX</span> x) y</span><br></pre></td></tr></table></figure>
<p>思考：其实纯函数的Curry化暗示了常规变成语言中按位置传参的参数顺序不能调换的本质：数学上两个参数其实是嵌套在高阶函数里的如<code>x-&gt;y-&gt;x*y</code>，函数嵌套可是不能调换顺序的</p>
<p>注意：这个语法糖很容易跟函数复合混淆，必须记清楚，这是个语法糖，它底层的纯函数从来不允许多个函数参数</p>
<p>容易混淆的例子：</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">f :: (Int-&gt;Int)-&gt;Int-&gt;Int</span><br><span class="line">g :: Int-&gt;Int</span><br><span class="line">result = f g 3</span><br><span class="line">-- f是一个Curry化书写的双入参函数</span><br><span class="line"></span><br><span class="line">f :: Int -&gt; Int</span><br><span class="line">g :: Int -&gt; Int</span><br><span class="line">result = f (g 3)</span><br><span class="line">--后面的括号是必要的，因为Curry写法是左结合的，这里不是Curry化</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>一些数据操作原语</p>
<ul>
<li>字符串拼接：<code>&quot;StringX&quot; &lt;&gt; &quot;StringY&quot;</code></li>
<li>数组拼接：<code>[1, 2] ++ [3]</code></li>
</ul>
</li>
<li>
<p>自定义数据类型：<code>data</code></p>
  <figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 定义类型</span></span><br><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Student</span> = <span class="type">Student</span> <span class="type">String</span> <span class="type">Int</span></span></span><br><span class="line"><span class="comment">-- 在类型声明中使用</span></span><br><span class="line"><span class="title">myStudent</span> :: <span class="type">Student</span></span><br><span class="line"><span class="comment">-- 创建该类型的实例</span></span><br><span class="line"><span class="title">myStudent</span> = <span class="type">Student</span> <span class="string">&quot;pumpkin&quot;</span> <span class="number">85</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 通过取值集合定义新类型，其实类似枚举；这里的True/False其实应该是构造器，只是构造器不需要任何子类型而已</span></span><br><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Bool</span> = <span class="type">True</span> | <span class="type">False</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 通过多个类型的并联构成类似共用体的新类型</span></span><br><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">JsonValue</span> = <span class="type">JsonString</span> <span class="type">String</span></span></span><br><span class="line">    | <span class="type">JsonInt</span> <span class="type">Int</span></span><br><span class="line">    | <span class="type">JsonFloat</span> <span class="type">Float</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>注</p>
<ul>
<li><code>data</code>左侧是<em>类型名</em>，右侧是<em>类型构造器名</em>，构造器后面跟的是“成员类型”（或者说是构造器的参数类型）</li>
<li>类型名和构造器名往往是相同的（也可以不同），但它们的性质不一样。前者只出现在<code>::</code>右侧，而后者用于构造该类型的表达式</li>
<li>也即类型构造器可以看作是一个<code>Args -&gt; CustomType</code>的函数</li>
<li>可以看出，纯函数背景下的“自定义类型”等效于其他类型的复合，只有这么简单我们才能发挥形式化的威力</li>
</ul>
<p>工程化：继承接口</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 定义类型，从Show接口泛化，可以被标准库的show转为转为字符串</span><br><span class="line">data JsonValue = JsonString String</span><br><span class="line">    | JsonInt Int</span><br><span class="line">    | JsonFloat Float</span><br><span class="line">    deriving Show</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>data</code>语法糖</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">    -- 具名字段</span><br><span class="line">    data Student</span><br><span class="line">        = Student</span><br><span class="line">            &#123;</span><br><span class="line">            name::String,</span><br><span class="line">            score::Int</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">    -- 按名构造</span><br><span class="line">    myStudent = Student &#123; name = &quot;bbpumpkin&quot;, score = 85&#125;</span><br><span class="line"></span><br><span class="line">    -- 访问成员</span><br><span class="line">    studentName = name(myStudent)</span><br><span class="line">    ```  </span><br><span class="line"></span><br><span class="line">- 类型别名`type`，比如`type A = B`，其实就是A是类型B的别名，没有创建新类型</span><br><span class="line">- 条件分支`if then else`基本操作，只是这次整个都是表达式了，没有副作用</span><br><span class="line">  - 注意到这里的分支其实是一种特殊的`-&gt;`映射，所以分支的每个块中都必须是一个表达式</span><br><span class="line">  - 突然能理解为什么Rust整出不带分号的表达式当作返回值的操作了</span><br><span class="line">- 模式匹配：`case`</span><br><span class="line">  - 说明：这个case不全是用来分支的，它还是使用自定义类型的重要手段</span><br><span class="line">  - 举例：一般匹配</span><br><span class="line">    ```Haskell</span><br><span class="line">    myFunc :: String -&gt; Int</span><br><span class="line">    myFunc c = </span><br><span class="line">        case c of </span><br><span class="line">            &quot;a&quot; -&gt; 1</span><br><span class="line">            &quot;b&quot; -&gt; 2</span><br><span class="line">            &quot;c&quot; -&gt; 3</span><br><span class="line">            --这里的模式写任意非字面量的合法变量名都行，Pattern就当作变量名，c会赋值给把这个Pattern</span><br><span class="line">            _ -&gt; 4</span><br></pre></td></tr></table></figure>
<ul>
<li>举例：访问自定义类型的成员<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Student</span> = <span class="type">Student</span> <span class="type">String</span> <span class="type">Int</span></span></span><br><span class="line"><span class="title">getStudentName</span> :: <span class="type">Student</span> -&gt; <span class="type">String</span></span><br><span class="line"><span class="title">getStudentName</span> stu = </span><br><span class="line">    <span class="keyword">case</span> stu <span class="keyword">of</span></span><br><span class="line">        <span class="type">Student</span> name score -&gt; name</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 语法糖：直接将Pattern写在入参的位置</span></span><br><span class="line"><span class="title">getStudentName</span> (<span class="type">Student</span> name score) = name</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>元组类型<code>Tuple</code></p>
<ul>
<li>包含三个元素的元组可以直接写作：<code>(&quot;pumpkin&quot;, 85, True)</code></li>
<li>上述写法是<code>Tuple &quot;pumpkin&quot; 85 True</code>的语法糖，<code>Tuple</code>是内置的一个高阶类型，前述元组的实际类型是<code>Tuple String Int Bool</code></li>
</ul>
</li>
<li>
<p>链表类型：<code>[MyType]</code></p>
<ul>
<li>
<p><code>[MyType]</code>声明一个以<code>MyType</code>为元素的链表</p>
<ul>
<li>之所以是链表，是因为函数式没有循环，实际使用容器都是尾递归展开的</li>
</ul>
</li>
<li>
<p>字面量：<code>[a, b, c]</code>直接书写，算是语法糖了</p>
</li>
<li>
<p>使用模式匹配来访问链表：<code>:</code>记号书写模式</p>
<p>举例：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">safeHead</span> :: [a] -&gt; <span class="type">Maybe</span> a</span><br><span class="line"><span class="title">safeHead</span> list =</span><br><span class="line"><span class="title">case</span> list <span class="keyword">of</span></span><br><span class="line">    <span class="comment">-- Empty list</span></span><br><span class="line">    [] -&gt; <span class="type">Nothing</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">-- Cons cell pattern, will match any list with at least one element</span></span><br><span class="line">    x : _ -&gt; <span class="type">Just</span> x</span><br></pre></td></tr></table></figure>
<p>说明：就像多数类型论教材那样，<code>:</code>是书写序列类型的记号，既可以用于书写模式也可以用于构造序列</p>
</li>
</ul>
</li>
<li>
<p>高阶类型与泛型（待完善）</p>
<ul>
<li>允许声明高阶类型（二阶类型，从给定一阶类型构造另一个类型），举例：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data Maybe a</span><br><span class="line">    = Nothing</span><br><span class="line">    | Just a</span><br></pre></td></tr></table></figure>
注意，这里的<code>a</code>是泛型，<code>Maybe</code>类似C++的模板，是一个类型构造器，给定一个具体类型可以构造类似<code>Maybe Int</code>这样的一阶类型
<ul>
<li>
<p>这里将<code>Maybe</code>看作一个二阶类型意义不大，因为<code>Maybe</code>不是这个类型系统的一阶公民了，我们没有一个变量可以是单纯的<code>Maybe</code>类型的，我们也没有不允许复合<code>Maybe</code>“类型”来构造其他类型</p>
</li>
<li>
<p>正式地说，这种接受一个泛型来构造一个一阶类型的泛型构造器在Haskell中被称为<em>类型类</em></p>
</li>
<li>
<p>类型了可以接受声明泛型约束，比如一个可比较的泛型类，并实现它的接口：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">-- 定义布尔数据类型</span></span><br><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Bool</span> = <span class="type">True</span> | <span class="type">False</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用class定义一个类型类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Equtable</span> a <span class="keyword">where</span></span></span><br><span class="line">  isEqual :: a -&gt; a -&gt; <span class="type">Bool</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用instance为Bool实现比较接口</span></span><br><span class="line"><span class="class"><span class="keyword">instance</span> <span class="type">Equtable</span> <span class="type">Bool</span> <span class="keyword">where</span></span></span><br><span class="line">  isEqual <span class="type">True</span>  <span class="type">True</span>  = <span class="type">True</span></span><br><span class="line">  isEqual <span class="type">False</span> <span class="type">False</span> = <span class="type">True</span></span><br><span class="line">  isEqual _     _     = <span class="type">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用类型类声明某个泛型函数的泛型约束</span></span><br><span class="line"><span class="title">myFunc</span> :: <span class="type">Equatable</span> a =&gt; a -&gt; a -&gt; <span class="type">String</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>注意相关原语：<code>class, where, instance, =&gt;</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>处理IO与副作用</p>
<ul>
<li>
<p>注意到，标准输入“函数”<code>getLine</code>并不是一个真的函数，它是一个<code>IO String</code>类型的“数据”</p>
<ul>
<li>实际上，Haskell使用内建的<code>IO</code>类型类来实现各种IO功能，而不是一般的纯函数</li>
</ul>
</li>
<li>
<p>特殊类型类<code>IO</code></p>
<ul>
<li>内建的类型类，专门用于处理IO相关的副作用</li>
</ul>
</li>
<li>
<p>关于“串联”</p>
<ul>
<li>注意到我们在纯函数中我们没有任何“顺序指令流”，整个Main如果不考虑IO操作的话就是一个表达式</li>
<li>这个表达式中所有<code>let</code>里的变量都是助记符号，没有求值顺序，不允许相互依赖</li>
<li>运算顺序的要求来自于函数复合的顺序</li>
<li>所以我们发现，我们在纯函数中“串联”各种操作的媒介其实是<code>-&gt;</code>，通过串联函数的输入输出来构造指令流（注意if和switch都是<code>-&gt;</code>的特殊形式而已</li>
<li>所以我们马上发现问题：IO功能实现为了类型类<code>IO</code>，怎么串联IO操作（更一般的，有副作用的操作）</li>
</ul>
</li>
<li>
<p>记号 <code>&gt;&gt;=</code></p>
<ul>
<li>
<p>定义：<code>(&gt;&gt;=) :: (IO a) -&gt; (a -&gt; IO b) -&gt; (IO b)</code></p>
</li>
<li>
<p>解释：<code>&gt;&gt;=</code>是一个泛型二元运算函数</p>
<ul>
<li>左边是一个<code>IO a</code>类型的对象，右侧是一个函数，输入类型<code>a</code>输出类型<code>IO b</code>的对象</li>
<li>这个运算符表达式的结果是一个<code>IO b</code>类型的对象</li>
<li>这个泛型运算符用于串联IO操作，其中<code>IO a</code>通常是一个输入<code>a</code>类型数据的操作，而<code>a -&gt; IO b</code>则是一个输出类型<code>a</code>的数据的操作</li>
</ul>
</li>
<li>
<p>用例：读取一个行并立刻输出</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title">getLine</span> :: <span class="type">IO</span> string</span><br><span class="line"><span class="title">putStrLn</span> :: <span class="type">String</span> -&gt; <span class="type">IO</span> ()</span><br><span class="line"></span><br><span class="line"><span class="comment">-- echo串联了两个IO操作</span></span><br><span class="line"><span class="title">echo</span> :: <span class="type">IO</span> ()</span><br><span class="line"><span class="title">echo</span> = getLine &gt;&gt;= \line -&gt; putStrLn line</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>形象的比喻：<code>&gt;&gt;=</code>右边其实类似于处理输入Input结果的回调函数</p>
</li>
</ul>
</li>
<li>
<p><code>*&gt;</code>记号和<code>&gt;&gt;</code>记号</p>
<ul>
<li><code>(*&gt;) :: IO a -&gt; IO b -&gt; IO b</code></li>
<li>解释：<code>*&gt;</code>也可以用于在不关心运算符左侧的IO操作的返回值的时候，串联两个IO操作，比如<code>putStrLn &quot;Hello&quot; *&gt; putStrLn &quot;World&quot;</code></li>
<li>一个直觉上的等效：<code>a *&gt; b = a &gt;&gt;= \_ -&gt; b</code></li>
<li><code>&gt;&gt;</code>运算符跟<code>*&gt;</code>几乎一致，保留的愿意只是向后兼容</li>
</ul>
</li>
<li>
<p><code>pure</code>记号</p>
<ul>
<li><code>pure :: a -&gt; IO a</code></li>
<li><code>pure</code>其实类似于void函数中的return，它专用于某些依赖于IO结果的函数的实现中。它可以快速使用一般类型<code>a</code>的值构造<code>IO a</code>用于函数的结果中</li>
</ul>
</li>
<li>
<p><code>fmap</code>记号</p>
<ul>
<li><code>fmap :: (a -&gt; b) -&gt; IO a -&gt; IO b</code></li>
</ul>
</li>
<li>
<p>一些规律：输入功能一般实现为<code>IO a</code>，输出功能一般实现为<code>a -&gt; IO ()</code></p>
</li>
<li>
<p><code>IO</code>的传染性</p>
<ul>
<li><code>IO</code>实际上是完全不透明的特殊设施，它就是有其独特的限制</li>
<li>一旦类型中染上IO，语言构造上没有任何办法再摘掉，也即<code>myExecute :: IO a -&gt; a</code>是无法实现的</li>
<li><code>IO a</code>和<code>a</code>的接口不再能直接匹配使用，比如<code>getLine ++ &quot;MyString&quot;</code>是不合法的，因为<code>IO String ++ String</code>的操作不存在</li>
<li>传染性导致<code>IO</code>相关功能最好只出现在系统代码的边缘，避免污染内部</li>
</ul>
</li>
<li>
<p>Do与纯函数书写</p>
<ul>
<li>
<p>复合要求的表达式构件，在Do块中可以当作过程式变成中的语句来使用</p>
</li>
<li>
<p>可以认为Do语句块中是一个允许包含<code>IO a</code>的表达式序列，系统自动使用<code>*&gt;</code>和<code>&gt;&gt;=</code>以及<code>-&gt;</code>正确地顺序串联其中所有表达式</p>
</li>
<li>
<p>三类表达式可以当作语句使用</p>
<ul>
<li><code>IO ()</code>类型的，比如<code>putStrLn &quot;haha&quot;</code></li>
<li><code>let</code>声明函数和变量（不需要<code>in</code>）</li>
<li><code>var &lt;- myVal</code>赋值语句，其中<code>myVal :: IO a</code>，而<code>var</code>就是IO操作的返回值</li>
</ul>
</li>
<li>
<p>Do语句块本身本身等价于一个<code>IO a</code>类型的表达式，可以任意嵌套</p>
</li>
<li>
<p>Do语句块地取值取决于整个语句块中最后一个表达式的取值</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>工程化：Module</p>
<ul>
<li>导出<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> MyModule (</span><br><span class="line">    <span class="type">MyType1</span>,</span><br><span class="line">    <span class="type">MyType2</span>,</span><br><span class="line">    <span class="type">MyFunc1</span>,</span><br><span class="line">    <span class="type">MyFunc2</span></span><br><span class="line">    ) <span class="keyword">where</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- where后面是类型和函数的实现代码</span></span><br></pre></td></tr></table></figure>
</li>
<li>导入：<code>import MyModule</code></li>
</ul>
</li>
<li>
<p>常见语法糖（待完善）</p>
<ul>
<li>
<p>局部变量</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Distance</span>::<span class="type">Int</span>-&gt;<span class="type">Int</span>-&gt;<span class="type">Int</span></span><br><span class="line"><span class="type">Distance</span> a b = </span><br><span class="line">    <span class="keyword">let</span></span><br><span class="line">        sqareA = a*a</span><br><span class="line">        sqareB = b*b</span><br><span class="line">    <span class="keyword">in</span></span><br><span class="line">        <span class="type">Sqrt</span> (sqareA + sqareB)</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>函数复合</p>
<p>其他语言中的点记号<code>.</code>这里被用于函数复合。灵感来自数学中的映射复合符号<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∘</mo></mrow><annotation encoding="application/x-tex">\circ</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4445em;"></span><span class="mord">∘</span></span></span></span></eq>，比如<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span></span></span></span></eq>和<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span></eq>的复合写作<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>f</mi><mo>∘</mo><mi>g</mi></mrow><annotation encoding="application/x-tex">f \circ g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">∘</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span></span></span></span></eq>，所以Haskell中有：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 等效如下定义</span></span><br><span class="line">(.) :: (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c</span><br><span class="line">(.) f g x = f (g x)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用例</span></span><br><span class="line"><span class="title">double</span> :: <span class="type">Int</span> -&gt; <span class="type">Int</span></span><br><span class="line"><span class="title">square</span> :: <span class="type">Int</span> -&gt; <span class="type">Int</span></span><br><span class="line"><span class="title">result</span> :: <span class="type">Int</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- result = 36</span></span><br><span class="line"><span class="title">result</span> = square . double <span class="number">3</span></span><br><span class="line"><span class="comment">-- 等效写法</span></span><br><span class="line"><span class="title">result</span> = square (double <span class="number">3</span>)</span><br></pre></td></tr></table></figure>
<p>注意：</p>
<ul>
<li>跟数学中的函数复合类似，复合函数是右结合的，所以<code>f.g x</code>中是先计算<code>g x</code>再计算<code>f (g x)</code></li>
<li>复合运算符本身也是右结合的</li>
</ul>
<p>复合记号的价值，除了可以链式书写函数复合，还有快速书写类型构造，比如：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Name</span> = <span class="type">Name</span> string</span></span><br><span class="line"><span class="class"><span class="keyword">data</span> <span class="type">Student</span> = <span class="type">Student</span> <span class="type">Name</span> <span class="type">Int</span></span></span><br><span class="line"><span class="title">myFunc</span> :: <span class="type">String</span> -&gt; <span class="type">Student</span></span><br><span class="line"><span class="title">myFunc</span> name = <span class="type">Student</span> . <span class="type">Name</span> name</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>真·匿名函数</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- result的值为16</span></span><br><span class="line"><span class="title">result</span> = (\num -&gt; num * <span class="number">2</span>) <span class="number">8</span></span><br></pre></td></tr></table></figure>
<p>注意，我们不使用一个专门记号来保存表达式中的函数定义，而是直接书写，这里反斜杠的必要性在于我们相当于不书写入参类型的情况下直接书写函数定义，让编译器现场推到这个反斜杠的入参的类型。而正常函数书写，定义和类型是需要分开书写的</p>
</li>
<li>
<p>单分支的case简化：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data Student = Student String Int</span><br><span class="line">getStudentName :: Student -&gt; String</span><br><span class="line">-- 完整书写</span><br><span class="line">getStudentName stu = </span><br><span class="line">    case stu of</span><br><span class="line">        Student name score -&gt; name</span><br><span class="line"></span><br><span class="line">-- 简略书写：直接将Pattern写在入参的位置</span><br><span class="line">getStudentName (Student name score) = name</span><br></pre></td></tr></table></figure>
</li>
<li>
<p><code>$</code>记号</p>
<p>用法一：减少函数嵌套调用的使用产生的括号</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 等效putStrLn(show(3+4))</span><br><span class="line">putStrLn $ show $ 3+4</span><br></pre></td></tr></table></figure>
<p>用法二：绑定多参函数的第二个成员</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">div :: Float -&gt; Float -&gt; Float</span><br><span class="line">div a b = a / b</span><br><span class="line">-- 朴素的绑定第一个参数的办法：</span><br><span class="line">div1st x = div x </span><br><span class="line">-- 绑定第二个参数的语法糖：</span><br><span class="line">div2nd y = div $ y</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
<h2 id="%E7%BA%AF%E5%87%BD%E6%95%B0%E7%9A%84monad" tabindex="-1">纯函数的Monad</h2>
<ul>
<li>
<p><strong>Monad可以看作一种暂时打不开的盒子。理论上一切异步过程和副作用都可以建模为Monad</strong></p>
</li>
<li>
<p>某种意义上说，<strong>Monad是一种设计模式</strong></p>
</li>
<li>
<p>Haskell中最典型的Monad就是IO，但Monad其实不只有IO。Monad在Haskell中可以看作一个类型类（类型构造器）：</p>
<figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="type">Monad</span> m <span class="keyword">where</span></span></span><br><span class="line">  pure :: a -&gt; m a</span><br><span class="line">  (&gt;&gt;=) :: m a -&gt; (a -&gt; m b) -&gt; m b</span><br></pre></td></tr></table></figure>
<p>其中<code>&gt;&gt;=</code>操作也叫<code>bind</code>操作，是<code>Moand</code>的核心操作。它看起来跟对单个元素执行变换的<code>map</code>有点像：<code>map :: a -&gt; (a -&gt; b) -&gt; b</code>。如果把<code>Monad</code>看作一个“箱子”，那<code>&gt;&gt;=</code>操作就是允许在不拆箱子的情况下变换箱子里的东西的操作，所以也有些人将其称为<code>flatmap</code></p>
<p>另一个隐藏的特点是，Monad应该是自然解开嵌套的，就是我们一般希望对于某个<code>Monad</code>，<code>Monad Monad T</code>等效<code>Monad T</code>（整个操作又是也称为<code>flatten</code>）</p>
<p>从上面的定义来看，Monad跟IO毫无关系，IO只是Monad的特例</p>
</li>
<li>
<p>Monad举例（以下以C#/C++语法书写了）</p>
<ul>
<li>Maybe就是Monad，相当于C#的可空类型。
<ul>
<li>C#中，<code>bind</code>操作就是我们允许将<code>U?</code>的对象变换为<code>V?</code>类型（比如说安全地对<code>T?</code>串联解引用），而不需要拆掉问号；当然我们很容易从<code>T</code>构造<code>T?</code></li>
</ul>
</li>
<li>很多Lazy求值可以建模为Monad
<ul>
<li>原则上我们应该允许对<code>Lazy&lt;T&gt;</code>执行所有<code>T</code>能支持的操作，只不过延迟到<code>Lazy</code>异步完成再执行这些操作</li>
<li>我们考虑<code>Lazy&lt;T&gt;</code>，如果Lazy是Monad，支持<code>flattenTransform(Lazy&lt;T&gt;, Function&lt;U, Lazy&lt;U&gt;&gt;)</code>操作，则我们可以使用<code>flattenTransform</code>执行任意操作，直到真的想取出结果再执行什么<code>Lazy&lt;TResult&gt;.GetValue</code></li>
</ul>
</li>
<li>Future/Promise可以是Monad
<ul>
<li><code>Promise&lt;T&gt;/Future&lt;T&gt;</code>是对输入执行某些操作后，承诺未来某个时间点能拿到<code>T</code>类型的结果</li>
<li>我们通过串联使用<code>Promise&lt;T&gt;.then()</code>来将嵌套代码变成串行代码
<ul>
<li>
<p>使用回调</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">        <span class="title function_">firstRequest</span>(<span class="function"><span class="params">response</span> =&gt;</span></span><br><span class="line">        <span class="title function_">secondRequest</span>(response, <span class="function"><span class="params">nextResponse</span> =&gt;</span></span><br><span class="line">            <span class="title function_">thirdRequest</span>(nextResponse, <span class="function"><span class="params">finalResponse</span> =&gt;</span></span><br><span class="line">                <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Final response: &#x27;</span> + finalResponse);</span><br><span class="line">                , failureCallback),</span><br><span class="line">            failureCallback),</span><br><span class="line">        failureCallback);</span><br><span class="line">        <span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    - 使用Promise</span></span><br><span class="line"><span class="string">       `</span><span class="string">``</span>javascript</span><br><span class="line">        <span class="title function_">firstRequest</span>()</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">response</span>      =&gt;</span> <span class="title function_">secondRequest</span>(response))</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">nextResponse</span>  =&gt;</span> <span class="title function_">thirdRequest</span>(nextResponse))</span><br><span class="line">        .<span class="title function_">then</span>(<span class="function"><span class="params">finalResponse</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Final response: &#x27;</span> + finalResponse))</span><br><span class="line">        .<span class="title function_">catch</span>(failureCallback);</span><br><span class="line">        <span class="string">``</span><span class="string">`  </span></span><br><span class="line"><span class="string">    </span></span><br><span class="line"><span class="string">    - 之所以能从嵌套中解脱，是因为`</span>then<span class="string">`会返回一个Future，这正式Monad的特点</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">  - 甚至整个`</span><span class="keyword">async</span>/<span class="keyword">await</span><span class="string">`协程模型都可以看作是某种Monad驱动的异步编程框架</span></span><br><span class="line"><span class="string">    - 我们编写的协程中，每个*Awaitable*都可以看作Monad，这次Monad这个箱子里装的东西就是整个函数的上下文（或者说它的栈帧）</span></span><br><span class="line"><span class="string">    - 我们的`</span><span class="keyword">async</span><span class="string">`协程代码就是对绕过Awaitable这个箱子对箱子里的东西进行操作（也就平凡地实现了`</span>&gt;&gt;=<span class="string">`），然后整个`</span><span class="keyword">async</span><span class="string">`函数也是一个Awaitable</span></span><br><span class="line"><span class="string">    - 在实现中，我们允许在还没等到之前挂起等待，来处理Awaitable中的值暂时拿不到的问题</span></span><br><span class="line"><span class="string">    - 当然，代价就是现代`</span><span class="keyword">async</span>/<span class="keyword">await</span><span class="string">`协程模型跟Monad一样具有传染性，工程上来说总是面临困难</span></span><br><span class="line"><span class="string"> </span></span><br><span class="line"><span class="string">  - Parser也是一个Monad</span></span><br><span class="line"><span class="string">  - 实际上FP中的List也可以视作一个Monad</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">- 到底Monad是怎么跟消除副作用/建模状态/异步扯上关系的</span></span><br><span class="line"><span class="string">  - State Monad如何建模“状态”</span></span><br><span class="line"><span class="string">    - Haskell代码</span></span><br></pre></td></tr></table></figure>
<p>– State是一个泛型函数的别名，runState方便将这个函数从别名中取出来<br>
newtype State s a = State {<br>
runState :: s -&gt; (a, s)<br>
}</p>
<p>– returnState是泛型函数，其中美元符号是为了节省括号<br>
returnState :: a -&gt; State s a<br>
returnState a = State $ \s -&gt; (a, s)</p>
<p>– bindState是Monad需要的标准bind操作了，其中m是绑定了a值类型的State<br>
– m :: State s a<br>
– k :: a -&gt; State s b<br>
– k a :: State s b<br>
– runState (k a) :: s -&gt; (b, s)<br>
– runState (k a) s’ :: (b, s’)</p>
<p>bindState :: State s a -&gt; (a -&gt; State s b) -&gt; State s b<br>
bindState m k = State $ \s -&gt; runState (k a) s’<br>
where (a, s’) = runState m s</p>
<p>instance Monad (State s) where<br>
m &gt;&gt;= k = bindState m k<br>
return a = returnState a</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">    - StateMonad把状态转移当作状态本身，这样做有效的原因是：给定一个初始输入和状态转移函数的序列，我们总是可以通过路径上所有的转移的复合来计算出当前的“返回值”</span><br><span class="line">    - 本质上是将状态机的中间状态看作是求值过程的中间取值，**将状态机整个生命周期的输入看作是一整个固定的函数输入，将时序逻辑化归为纯函数的组合逻辑**，并在实际运行中该表达式的输入并不是一开始就到位，若相关的输入尚未到位，则相关的转移函数的计算只能阻塞等待/挂起等待，直到输入得到更新，由此通过纯函数建模了时序逻辑</span><br><span class="line">    - 其实这方面最好的示例是使用State Monad实现栈</span><br><span class="line">  - Monad能消除副作用的原因是：</span><br><span class="line">    - Monad可以将状态的每次转移和状态的记忆，等价替换为，对起始输入以及一连串后续输入一连串变换和纯函数的复合</span><br><span class="line">    - `IO String`代表的其实是用户在程序整个生命周期中的所有输入。由于程序不可能预测用户的所有输入，所以每次bind函数求值时，如果缓冲区没有内容，则需要等待输入，而“表达式”的“求值”就暂停了；用户读出某些内容后`IO String`这个缓冲区的抽象并没有实质改变，而是作为下一个输入处理函数的输入状态，通过“挂起”将组合逻辑拆分成时序逻辑</span><br><span class="line">  - 综上，在使用Monad设计模式时，我们考虑的**Monad其实就是Context**，这不过这个Monad在函数式里式“不变”的Context——每个跟副作用相关的函数都需要输入Context然后输出一个变换后的Context罢了</span><br><span class="line">  - 最后，其实在没有OOP的C语言中，Monad有一个更加直白的近似物：*全局变量*</span><br><span class="line"></span><br><span class="line">- Monad只是其中一种抽象，设计模式上还有很多类似Monad的东西</span><br><span class="line">  - 比如在异步中使用Proxy，如果`Proxy&lt;T&gt;`代理了所有`T`的接口，则`Proxy`也可以算Monad。这意味着异步的事实可以被Proxy彻底隔离，用户代码可以几乎无感地对异步或同步加载的`T`类型对象执行相同的操作</span><br><span class="line">    - 当然，代价就是，事实上Proxy需要以某种方式录制所有操作，并在异步完成的时刻重放它们</span><br><span class="line">    - 工程实践中，可以通过收窄Proxy的接口来避免无止境的重复编码</span><br><span class="line">    - 不过有一说一，如果Proxy真的实现了`T`的全部接口，那上层永远也不需要真正取出`T`来，只需要操作Proxy即可。Future也是同理的</span><br><span class="line"></span><br><span class="line">## 题外话：为啥Monad是“自函子范畴上的一个幺半群”</span><br><span class="line">- </span><br><span class="line">- 幺半群条件</span><br><span class="line">  - 群元：函数`a -&gt; b`（注意这里把高阶函数也看作函数）</span><br><span class="line">  - 群乘法：`&gt;&gt;=`组合运算</span><br><span class="line">  - 单位元：`return :: a -&gt; M a`运算，需要验证这个运算是单位元</span><br><span class="line">  - 结合律：需要保证成立`f &gt;= g &gt;= h = f &gt;= (g &gt;= h)`</span><br><span class="line"></span><br><span class="line">- 自函子</span><br><span class="line">  - 函子：</span><br></pre></td></tr></table></figure>
</li>
</ul>
class Functor f where<br>
fmap :: (a -&gt; b) -&gt; f a -&gt; f b<pre><code>
将类型类`Monad`看作是函数类型的映射，这样的映射就是函数
</code></pre>
</li>
<li>自函子：
<ul>
<li>由于类型系统只有一阶类型，所有的函数都是同一类的，所以<code>Monad</code>这个函子就是自我映射的函子，就是自函子</li>
</ul>
</li>
</ul>
</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/0/" class="post-title-link" itemprop="url">《重构的时机与方法》读书笔记</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-09-21 22:55:44" itemprop="dateCreated datePublished" datetime="2024-09-21T22:55:44+08:00">2024-09-21</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-09 01:13:06" itemprop="dateModified" datetime="2024-10-09T01:13:06+08:00">2024-10-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E3%80%8A%E9%87%8D%E6%9E%84%E7%9A%84%E6%97%B6%E6%9C%BA%E4%B8%8E%E6%96%B9%E6%B3%95%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0" tabindex="-1">《重构的时机与方法》读书笔记</h1>
<h2 id="%E9%87%8D%E6%9E%84%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%96%B9%E6%B3%95%E8%AE%BA%E5%92%8C%E7%90%86%E5%BF%B5" tabindex="-1">重构的基本方法论和理念</h2>
<ul>
<li>不应该重构的情况
<ul>
<li><em>性能敏感的代码</em></li>
<li>一次性代码</li>
<li>即将停用的代码</li>
</ul>
</li>
<li>可读性
<ul>
<li>代码能直接传达意图的特性</li>
<li>“不可读”意味着不能很快地通过函数名/变量名理解意图</li>
<li>代码不可读会来自于不充分的自描述，比如使用大量低级原语（比如四则运算、数组索引）</li>
</ul>
</li>
<li>可维护性
<ul>
<li><em>维护</em>：对于存量代码，无论是修复缺陷还是扩展功能，我们都需要评估“代码的增加/修改应该放在哪一个上下文中”</li>
<li>评估代码修改应该所处的上下文意味着“维护的成本是需要阅读理解的关联代码长度”</li>
<li>因此可维护性的定性的度量标准是，<em>维护者需要Review多少相关代码才能有信心地作出修改</em></li>
</ul>
</li>
<li>规则
<ul>
<li>针对代码的要求，比如“一个函数不超过5行”</li>
<li>“代码异味”
<ul>
<li>作为识别“坏的代码”的直觉或者说经验</li>
<li>规则是系统化表征代码异味的工具</li>
</ul>
</li>
<li>一旦违反，我们可以将给定函数作为重构目标</li>
<li>一旦识别到违反的规则，可以去匹配相关的<em>重构模式</em></li>
</ul>
</li>
<li>重构模式
<ul>
<li>一组源码操作的模式，依照套路可以在不改变代码行为的前提下重构代码以处理对规则的违反，比如“提取函数”</li>
</ul>
</li>
<li>重构的要点
<ul>
<li>提高代码的可读性</li>
<li>提高代码的可维护性</li>
<li>在不修改软件行为的前提下达成上述目标</li>
</ul>
</li>
<li>重构的基本流程
<ol>
<li>选择一个重构目标（比如一个类的方法）</li>
<li>检查该目标是否破坏了规则</li>
<li>若是，匹配规则对应的重构模式，执行重构</li>
</ol>
</li>
</ul>
<h2 id="chapter-3.-%E6%8B%86%E5%88%86%E9%95%BF%E5%87%BD%E6%95%B0" tabindex="-1">chapter 3. 拆分长函数</h2>
<p>本章节聚焦同一个方法内部的一些基本规则和重构</p>
<ul>
<li>
<p>理念：一个函数只干一件事</p>
<ul>
<li>这个理念最有争议的点就是“怎么算作一件事”</li>
<li>这本书的不少规则以非常具体的方式界定了“一件事”，使得这个理念能得到更好的落实</li>
</ul>
</li>
<li>
<p>规则：分解函数以平衡抽象</p>
<ul>
<li>具体描述：同一个方法中，使用一个实例时，要么只使用实力的方法，要么只将实例作为参数传递</li>
<li>背后的意图是“函数的内容应该在同一个级别的抽象上”</li>
<li>很有意思的规则，通过区分这种使用语法背后暗示抽象层级区别来试图保证封装良好
<ul>
<li>将实例当作参数传递时通常意味着我们将它作为一个整体来使用，此时不关心实例的状态，不应该使用点记号访问其方法</li>
<li>反之亦然，只不过实践中可能没那么僵化</li>
</ul>
</li>
</ul>
</li>
<li>
<p>理念：组合优于继承</p>
<ul>
<li>属于陈词滥调了</li>
<li>主要看点：原来主流的重构观点确实是通过“继承Interface + 委托”的范式来实现组合。</li>
<li>这意味着现代的继承语法已经甩掉了“公有继承等于is-a关系”的观点，而是专注于接口本身</li>
<li>这意味着为了给Vehicle增加Wheel的服务，让Vehicle继承IWheel接口然后再委托给Wheel类的做法是可以接受的
<ul>
<li>虽然我还是感觉不太符合直觉，可能是<code>IWheel</code>的命名不恰当</li>
</ul>
</li>
</ul>
</li>
<li>
<p>规则：只在最开始使用if</p>
<ul>
<li>认为即便是校验一下参数的if也是做了一件事，根据“一个函数只干一件事”的理念，if没放开头就暗示了函数包含多于一件事</li>
<li>工程实践中有点过于苛刻了
<ul>
<li>比如校验参数的if改为assert断言，实际操作中我们肯定不希望把各种鸡毛蒜皮的小异常都抛到上层让程序频繁崩溃
<ul>
<li>注意到良好的封装的其中一个要求是能够正确消化掉（处理掉）一些上层不关心的异常</li>
</ul>
</li>
<li>结果就是要么频繁使用try来处理异常（非常丑陋且低效），要么非得使用if来打印异常日志并返回上层（使用Asset实现不了在不抛出异常的情况下终止函数执行）</li>
<li>不过实际上，很多校验如果失败的话，函数其实是执行不下去，此时用if和用throw的区别无非是：是否会中断上层调用方法的流程
<ul>
<li>如果上层方法依赖这个方法的结果，那这个结果不存在也变相中止了上层方法的流程，此时抛出异常没有问题</li>
<li>如果上层方法不依赖这个方法的结果，那抛出异常不合适</li>
<li>思考：如果我在“不关心这个方法的结果”的一层上加try是不是兼顾了两种情况？既不用层层校验（通过异常的退栈来跳出），也不用可以做到模块内部正确处理异常</li>
<li>比如说，我们总是在public方法这一层设置try，保证其他模块使用时能无视掉模块内部的一些异常</li>
</ul>
</li>
<li>还有，在不考虑多条件分支的情况下，这个规则相当于将所有方法的圈复杂度锁定为1，这个通常没必要</li>
</ul>
</li>
</ul>
</li>
<li>
<p>思考：相比C++，C#的泛型语法更规范更安全更受限，但代价有些zero-cost abstraction无法实现了</p>
<ul>
<li>比如，如果我有一个编译时写死的Strategy列表需要使用
<ul>
<li>C++支持可变参数模板，将Strategy类数组写入可变参数模板中，然后展开之后不需要任何虚函数、多态和额外内存分配了</li>
<li>C#不支持可变参数模板，编译时确定的东西不得不使用动态派发，也即一个<code>IStrategy</code>实例数组，而且依赖单例模式（享元模式）来避免大量GC</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="chapter-4.-%E4%BD%BF%E7%94%A8%E7%B1%BB%E5%9E%8B%E7%B3%BB%E7%BB%9F" tabindex="-1">chapter 4. 使用类型系统</h2>
<ul>
<li>
<p>理念：扩展优于修改</p>
<ul>
<li>在我们试图编写业务代码时，能不改动老的代码总是最好的，这样最大程度降低重新测试的成本和改动现有功能的风险</li>
<li>这意味着我们需要仅通过增加代码来增加行为，减少硬编码</li>
<li>不仅是避免硬编码数据，而且是避免硬编码决策逻辑（见后面）</li>
</ul>
</li>
<li>
<p>规则：只使用一个if</p>
<ul>
<li>意图：保证一个函数只做一件事情</li>
<li>跟圈复杂度有些关联</li>
</ul>
</li>
<li>
<p>规则：从不使用else</p>
<ul>
<li>意图：避免“硬编码决策逻辑”</li>
<li>书中只将if当作一种检查语句来使用，认为if-else联用是“硬编码了决策”从而方案了后续扩展</li>
<li>解决策略：将if一律改成多态，总是通过动态派发来解耦决策
<ul>
<li>显然，如果全部改动态派发，马上会新增一堆new操作和虚函数访问</li>
<li>优化虚函数：改静态派发。因为绝大多数多态都是静态的（我们仅根据不同的代码上下文就能在编译期决策我们或落实哪个行为）</li>
<li>优化new操作：
<ul>
<li>对象池模式/单例模式</li>
<li>动态派发可能是不可避免的。比如我们的行为以来输入或者运行时上下文；或者我们需要容器化遍历实例并执行多态，这种派发只有在C++中用复杂的设施才能改成静态派发</li>
<li>此时，我们用于避免硬编码决策逻辑的类通常是Strategy，这种类没有实际状态（其实底层只是等效一个函数指针 + 它的虚表），所以可以做成单例对象一次创建全局使用。代价是代码可能变得复杂冗长</li>
</ul>
</li>
</ul>
</li>
<li>效果：对于给定模块，通过派发，我们可以修改传入的实参而不修改模块本身来改变模块的行为</li>
</ul>
</li>
<li>
<p>规则：从不使用switch</p>
<ul>
<li>动机类似从不使用else的延续</li>
<li>规则的例外是：仅在每个case都返回，且没有（有效的）default的情况下可以接受</li>
<li>不能有default的原因是：一旦输入新增，switch没有同步修改，则编译器不会提示，这个异常会被延迟到运行时才发现，这不是理想的代码结构</li>
<li>switch的另一个坏处是：容易忘掉break（这个其实IDE和编译器都可以解决，但不应该依赖此）</li>
</ul>
</li>
<li>
<p>重构模式：去除泛化</p>
<ul>
<li>将一些通用方法拆分回特定情况的代码，哪怕代码有重复</li>
<li>这个模式比较反直觉，可以让可以（至少部分）重用的代码变成重复代码，一般是跟其他模式组合使用的</li>
</ul>
</li>
<li>
<p>规则：仅从接口继承</p>
<ul>
<li>这意味着*禁止从类或者抽象类继承”</li>
<li>理由是：从类/抽象类继承的主要动机是通过让某个方法拥有默认实现来避免重复编码</li>
<li>问题：这种代码共享会导致耦合</li>
<li>解决策略通常是使用Strategy模式抽出共享代码</li>
</ul>
</li>
</ul>
<h2 id="chapter-5.-%E6%8F%90%E5%8F%96%E7%9B%B8%E4%BC%BC%E7%B1%BB" tabindex="-1">chapter 5. 提取相似类</h2>
<ul>
<li>规则：if语句不应该有副作用
<ul>
<li>与其说是规则不如说是理念。因为现在使用有副作用的if的语法糖已经很普遍了。C#中的<code>out</code>参数在减少了编码量的同时确保了可读性</li>
<li>但这个理念还是有价值的：凡是类似<code>Check, Can, Assert</code>这种只用来判断的方法，就应该约定它们其中不包含副作用</li>
<li>一个推向极端的版本：函数要么有返回值且无副作用（函数式中的Pure Function），要么无返回值而有副作用（Monad）</li>
</ul>
</li>
</ul>
<h2 id="chapter-6.-%E4%BF%9D%E6%8A%A4%E6%95%B0%E6%8D%AE" tabindex="-1">chapter 6. 保护数据</h2>
<ul>
<li>
<p>规则：从不提供getter/setter</p>
<ul>
<li>动机：按照理念“不与陌生人说话”，认为即便有了Getter的封装来保护数据依然是不够的。正确使用private的方法是：把所有用到Getter的代码迁移到类里面</li>
<li>解决方法：使用重构模式Push Code Into Class（代码迁移到类中，见下）</li>
<li>一个有意思的观察：一般Getter/Setter式的代码会暗示了“拉”模式的架构，而去除之后会演变成“推”模式的架构
<ul>
<li>实践中其实这两种模式各有优劣的</li>
<li>推模式
<ul>
<li>推模式往往让类的通用性下降。如果要在使用推模式的同时避免频繁修改类的实现，意味着类本身需要使用很多Strategy模式避免硬编码</li>
</ul>
</li>
<li>拉模式
<ul>
<li>拉模式很多时候能减少编码，将Getter类看作一个共享数据结构，当然这确实带来了一些耦合</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>重构模式：代码迁移到类中</p>
<ul>
<li>将某些代码从类外部迁移到类中，非常笼统的做法</li>
<li>这个模式的意义在于，实践中就是有很多代码放类外或者类内都是可行的。这个模式的存在暗示了，我们在重构中可以完全不改变逻辑的情况下执行这个代码迁移的操作，至于何时迁移如何迁移，则取决于我们的规则</li>
<li>更具体地说，代码放在类外还是类内，从编码角度都是可等效实现的，但放在不同的位置意味着不同的架构设计，所以这是架构设计的决策点</li>
</ul>
</li>
<li>
<p>规则：从不出现相同前后缀</p>
<ul>
<li>如果成员/方法的良好命名中，出现了共享前缀/后缀（比如<code>playerPos, playerType</code>，或者<code>tranformMap, updateMap</code>），则需要抽取出单独的类</li>
<li>动机是显然的，而其中一个就是保护数据，让状态更加局部化</li>
<li>通常将这种对成员/方法进行进一步封装的重构模式叫做Encapsulate Data（封装数据）</li>
<li>另一个好处是这帮助我们定义什么叫做“一个类只能有一个职责”：当我们有一组方法是共享前后缀的时候，往往意味着当前类已经有多个职责了</li>
</ul>
</li>
<li>
<p>规则：强制时序</p>
<ul>
<li>如果方法存在某种时序依赖，借助编译器设施（比如语言提供的构造函数）强制这种时序生效</li>
<li>这种思想其实是通过构造函数这种特殊语言设施告知编译器我们的代码运行方式，最终让编译器来保证代码的正确性</li>
<li>实际使用中的局限包括对象池（不能使用构造函数）以及框架限制（Unity的Mono）以及性能优化（比如异步创建）</li>
</ul>
</li>
</ul>
<h2 id="%E5%AE%8C%E6%9C%AC%E9%9A%8F%E7%AC%94" tabindex="-1">完本随笔</h2>
<ul>
<li>其实纵观全书，很多“代码异味”的识别以及它们的重构模式，对于开发者来说都是自然的（不言自明的）</li>
<li>这本书对我最有价值的地方在于：
<ol>
<li>明确了代码可维护性、代码可读性的具体含义，这有助于我自己思考编写真正的“可维护”代码而不是简单地滥用抽象和代码复用</li>
<li>以可定性甚至可定量的方式描述了某些我们直觉上意识到的代码异味，比如“5行法则”，“单if法则”，“无else法则”，“无Getter法则”</li>
<li>以非常明确的模板操作/模板代码进一步厘清了设计模式的合理实现，比如策略模式的实现、组合的实现</li>
<li>帮助我意识到编码中有很多从编码角度是等效的但从设计角度不等效的情形，这些情形正是所谓代码架构的决策点</li>
<li>明确了抽象的目的往往是可扩展性、可维护性、可复用性，而代价是性能，因此C<ins>的“零开销抽象”才如此的独特：如果我们既想通过抽象来支撑大型工程，又不想为此支付overhead，那C</ins>几乎是唯一的选择</li>
<li>整理了一些平时我零散的软件工程理念</li>
</ol>
</li>
<li>全书的一些设计理念
<ul>
<li>可维护性高意味着我们只需要研究很少的上下文就能维护/扩展一个模块</li>
<li>可读性意味着代码是自描述的，我们容易从代码书写中理解代码意图</li>
<li>抽象是通过提高实际的复杂度（增加编码、类、方法）来降低理解复杂度的过程</li>
<li>一个方法只干一件事，一个类只有一个职责</li>
<li>扩展优于修改</li>
<li>“不与陌生人说话”（数据保护）</li>
</ul>
</li>
<li>工程实践的无奈
<ul>
<li>以下几个问题限制了我产出完全没有“代码异味”的优质代码
<ul>
<li>频繁变更的需求 + 有限的时间：不会有充足的时间为需求搭建框架/重构代码</li>
<li>敏感的性能要求：游戏的绝大部分运行时代码都运行在Update中，如果要求全程流畅，那整个系统的所有代码都是性能敏感的：每次Update不超过16ms</li>
</ul>
</li>
<li>性能优化会牺牲掉代码的重构能力
<ul>
<li>这也是所谓“不要过早优化”理念的动机之一</li>
<li>类似普遍的“对象池”设计限制了我们使用更安全的构造/析构函数来保证时序安全</li>
</ul>
</li>
<li>框架也限制了我们写出可维护的代码
<ul>
<li>Unity引擎要求在主线程使用其API，导致无法在析构函数释放Unity资源</li>
<li>虽然我们仍然可以使用Mono的<code>OnDestroy</code>，但此法将类的声明周期绑定在了Unity GameObject上了，限制了我满足其他需求（比如对象池，比如Prefab异步）</li>
<li>我们可以自定义<code>OnRelease</code>然后约定在销毁时手动调用，但这样我们失去了编译器的帮助（没有强制这个时序，没有编译报错），一旦“忘记”就会出bug</li>
</ul>
</li>
<li>对模块稳定性的要求
<ul>
<li>这意味着我们不能轻易抛出异常导致崩溃，而是尽可能隐藏一些不致命的异常，虽然这会导致更多问题</li>
</ul>
</li>
</ul>
</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/35bde018/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/35bde018/" class="post-title-link" itemprop="url">Graphics_RenderingPipeline</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-08-18 13:06:04" itemprop="dateCreated datePublished" datetime="2024-08-18T13:06:04+08:00">2024-08-18</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-09 01:07:00" itemprop="dateModified" datetime="2024-10-09T01:07:00+08:00">2024-10-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E5%9B%BE%E5%BD%A2%E6%B8%B2%E6%9F%93%E7%AE%A1%E7%BA%BF" tabindex="-1">图形渲染管线</h1>
<h2 id="gpu%E7%A1%AC%E4%BB%B6%E6%9E%84%E6%88%90%E7%AC%94%E8%AE%B0" tabindex="-1">GPU硬件构成笔记</h2>
<ul>
<li>术语
<ul>
<li>GPR: General Purpose Register，类似CPU的Register集合
<ul>
<li>GPR file表示一组计算单元对应的寄存器上下文的集合</li>
</ul>
</li>
<li>Host/Device
<ul>
<li>来自NV的说法，Host表示CPU以及主存构成的宿主计算系统，Device表示GPU和（可能存在的）显存构成的额外计算系统</li>
</ul>
</li>
</ul>
</li>
<li>Shader Core
<ul>
<li>一个指令buffer，n个计算单元（ALU/FPU），n组GPR</li>
<li>SIMT，同时对一个指令流和n组数据执行n个thread</li>
</ul>
</li>
<li>Workgroup：
<ul>
<li>一个能够在Shader Core上运行的线程组</li>
<li>nv上就是warp，amd上是wavefront，mali上叫做quad</li>
<li>由于每个GPR file能够表征一个thread的当前运行状态，所以我们用一个GPR file表示一个thread，一个workgroup的实际内容可能就是n个GPRfile的数据（指令buffer可以认为是固定无法切换的）</li>
</ul>
</li>
<li>Latency Hiding
<ul>
<li>通常来说，Workgroup的数目大于Shader Core的数目，一个Shader Core拥有多个Workgroup，<em>Core中同时执行的Workgroup只有一个</em></li>
<li>当一个Workgroup执行到Stall的时候（比如Sampling），立刻切换到其他Workgroup执行</li>
<li>类似单核多线程的并发</li>
<li>目的是隐藏这个Stall的延迟（该延迟可达到100~1000个Cycle）</li>
<li>代价是会延长某个WorkGroup的总完成时间（增大时延）</li>
<li>好处是通过充分利用Shader Core提高了Throughput</li>
</ul>
</li>
<li>Unified Shader Core
<ul>
<li>一个通用Shader Core在调度器的控制下装入一个Shader程序，可以是VS/GS/FS，然后调度多个Workgroup执行Vertex Stage或者Fragment</li>
</ul>
</li>
</ul>
<h2 id="%E7%A7%BB%E5%8A%A8%E7%AB%AFgpu" tabindex="-1">移动端GPU</h2>
<h3 id="%E5%B8%82%E5%9C%BA%E4%B8%8A%E7%9A%84%E5%B8%B8%E8%A7%81%E6%9E%B6%E6%9E%84" tabindex="-1">市场上的常见架构</h3>
<ul>
<li>Mali</li>
<li>Adreno
<ul>
<li>源自AMD，常见于高通</li>
</ul>
</li>
<li>PowerVR
<ul>
<li>苹果是类似的</li>
</ul>
</li>
</ul>
<h3 id="tbr" tabindex="-1">TBR</h3>
<ul>
<li><em>移动端GPU没有自己的显存</em>
<ul>
<li>PC端不但由自己的显存，而且有On-board memory（Global Memory/Local Memory）和on-chip memroy（Register/Shared Memory）</li>
<li>移动端的显存只能占用主存的一块区域</li>
<li>这意味着，移动端的GPU和显存通信相当于PC端的Device和Host通信，这样的通信占用带宽巨大且发热严重</li>
</ul>
</li>
<li>考虑到在FS中会频繁的读写Frame Buffer
<ul>
<li>注意，由于有限的寄存器以及大量的Frame Buffer像素，多次读取主存上的Frame Buffer将不可避免</li>
<li>因此使用<em>Tile-based Rendering</em></li>
</ul>
</li>
<li>TBR
<ul>
<li>在VS阶段一切如常</li>
<li>在FS阶段<strong>每次将一个Tile一次性载入GPU上的Local Tile Memory中</strong>，然后GPU中的FS就可以读写Local Tile Memory而不是主存上的Frame Buffer来执行FS阶段的操作。执行完之后再将Tile的数据写回到Frame Buffer中</li>
<li>Host-Device带宽的节省：从取决于FS的n次读写降低到固定的1读1写</li>
<li>好处是节省了带宽，降低了发热；代价是GPU每次只能渲染一个Tile，无法充分并行</li>
</ul>
</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/0/" class="post-title-link" itemprop="url">未命名</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-03-07 21:21:10" itemprop="dateCreated datePublished" datetime="2024-03-07T21:21:10+08:00">2024-03-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-09 01:07:00" itemprop="dateModified" datetime="2024-10-09T01:07:00+08:00">2024-10-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>官网镜像 + Ventory等确实是傻瓜式安装</li>
<li>安装好之后
<ul>
<li><strong>主机表现为只有命令行的Linux服务器</strong></li>
<li>默认需要通过网络 + Web界面管理PVE服务器</li>
<li>默认创建一个供虚拟机使用的网桥</li>
</ul>
</li>
<li>网络配置
<ul>
<li>有DHCP的话直接开启DHCP</li>
<li>开启后重启<code>systemctl restart network</code>重启网络服务</li>
<li>使用DHCP得到的IP加上默认的8006端口在Web上进入PVE管理界面</li>
</ul>
</li>
<li>PVE + Win10 + Kodi失败
<ul>
<li>原因：虚拟机上的Kodi出现DX报错，导致失败</li>
<li>解决：只能放弃PVE了，走Win10作为宿主平台，然后再在Win10上虚拟出各种服务</li>
</ul>
</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/af30b70c/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/af30b70c/" class="post-title-link" itemprop="url">漫评：我推的孩子第一话</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-08 02:35:52" itemprop="dateCreated datePublished" datetime="2023-07-08T02:35:52+08:00">2023-07-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-09 01:07:00" itemprop="dateModified" datetime="2024-10-09T01:07:00+08:00">2024-10-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%BC%AB%E8%AF%84/" itemprop="url" rel="index"><span itemprop="name">漫评</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E6%BC%AB%E8%AF%84%EF%BC%9A%E6%88%91%E6%8E%A8%E7%9A%84%E5%AD%A9%E5%AD%90%E7%AC%AC%E4%B8%80%E8%AF%9D" tabindex="-1">漫评：我推的孩子第一话</h1>
<p><em>我推的孩子第一话2020年代目前为止最佳日本OVA动画，对偶像题材的反传统表现和对偶像产业的批判让它鹤立鸡群，它是足以与《浪客剑心追忆篇》相媲美的外传动画精品</em></p>
<p>（待完善）</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/df82f18d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/df82f18d/" class="post-title-link" itemprop="url">漫评：暗杀教室</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-07 16:23:19" itemprop="dateCreated datePublished" datetime="2023-07-07T16:23:19+08:00">2023-07-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-09 01:07:00" itemprop="dateModified" datetime="2024-10-09T01:07:00+08:00">2024-10-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%BC%AB%E8%AF%84/" itemprop="url" rel="index"><span itemprop="name">漫评</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="%E6%BC%AB%E8%AF%84%EF%BC%9A%E6%9A%97%E6%9D%80%E6%95%99%E5%AE%A4" tabindex="-1">漫评：暗杀教室</h1>
<p><em>比之波澜壮阔的奇幻冒险，这部以枯燥啰嗦、为少年人所厌弃的教育为题材的少年漫，竟能将教师与育人的情怀演绎到极致，毫无疑问的《乡村教师》《放牛班的春天》的精神续作，日本动漫又一次惊艳了我——暗杀教室是近乎完美的少年动漫作品</em></p>
<h2 id="%E5%86%85%E5%AE%B9%E7%AE%80%E8%AF%84%EF%BC%9A%E8%AE%B2%E5%A5%BD%E4%BA%86%E4%B8%80%E4%B8%AA%E6%99%AE%E9%80%9A%E7%9A%84%E6%95%85%E4%BA%8B" tabindex="-1">内容简评：讲好了一个普通的故事</h2>
<p>总体来说，暗杀教室的故事本身并不出彩，但在讲故事上确实是高于及格的表现，又一个日本动画“讲好一个普通的故事，而不是普通地讲一个好故事”的作品叙事理念的案例。《暗杀教室》有着：</p>
<ul>
<li>新颖的破题</li>
<li>经不起推敲的设定</li>
<li>优秀的单元</li>
<li>平庸的主线</li>
<li>扎实的叙事</li>
<li>感人的结局</li>
</ul>
<h3 id="%E6%96%B0%E9%A2%96%E7%9A%84%E7%A0%B4%E9%A2%98%EF%BC%8C%E4%BD%86%E4%B8%80%E5%AE%9A%E7%A8%8B%E5%BA%A6%E4%B8%8A%E6%B2%A6%E4%B8%BA%E5%99%B1%E5%A4%B4" tabindex="-1">新颖的破题，但一定程度上沦为噱头</h3>
<h3 id="%E7%AE%80%E5%8D%95%E5%88%B0%E5%8D%95%E8%96%84%E4%BD%86%E6%98%AF%E5%AE%8C%E6%88%90%E5%BA%A6%E6%9E%81%E9%AB%98%E7%9A%84%E4%B8%BB%E7%BA%BF%E5%89%A7%E6%83%85" tabindex="-1">简单到单薄但是完成度极高的主线剧情</h3>
<h3 id="%E5%BA%94%E8%AF%95%E6%95%99%E8%82%B2%E4%B8%BB%E5%AF%BC%E4%B8%8B%E7%9A%84%E6%A0%A1%E5%9B%AD%E7%94%9F%E6%B4%BB%E7%9A%84%E8%89%BA%E6%9C%AF%E5%8C%96%E5%8F%8D%E6%98%A0" tabindex="-1">应试教育主导下的校园生活的艺术化反映</h3>
<h3 id="%E7%BB%8F%E4%B8%8D%E8%B5%B7%E6%8E%A8%E6%95%B2%E4%BD%86%E8%B6%B3%E5%A4%9F%E6%B5%AA%E6%BC%AB%E7%9A%84%E5%B0%91%E5%B9%B4%E6%BC%AB%E7%94%BB%E4%B8%96%E7%95%8C%E8%A7%82" tabindex="-1">经不起推敲但足够浪漫的少年漫画世界观</h3>
<h2 id="%E4%BC%98%E7%A7%80%E7%9A%84%E6%83%85%E7%BB%AA%E6%B8%B2%E6%9F%93%EF%BC%8C%E6%95%99%E8%82%B2%E6%83%85%E6%80%80%E7%9A%84%E6%9E%81%E8%87%B4%E6%BC%94%E7%BB%8E" tabindex="-1">优秀的情绪渲染，教育情怀的极致演绎</h2>
<p>作者借“杀老师”这个形象就这样几个问题表达了自己的见解：“理想的教师是怎样的”，“理想的教育是怎样的”，“教师的教育是如何影响学生的一生的”，“当今社会环境下少年需要怎样的三观，怎样引导这样的三观”、“如何理解应试教育”、“理想的师生关系是怎样的”，“教育事业与育人情怀是如何传承的”。《暗杀教室》这不是一部教育学的论著，所以在谈论这几个问题时，它是带着温度带着故事去表达的。因此，围绕这几个问题，作品展示的并不是什么入木三分的教育见解，而是对教育情怀的极致演绎。</p>
<h3 id="%E7%90%86%E6%83%B3%E7%9A%84%E6%95%99%E5%B8%88%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84" tabindex="-1">理想的教师是怎样的</h3>
<h3 id="%E7%90%86%E6%83%B3%E7%9A%84%E6%95%99%E8%82%B2%E6%98%AF%E6%80%8E%E6%A0%B7%E7%9A%84" tabindex="-1">理想的教育是怎样的</h3>
<h3 id="%E6%95%99%E5%B8%88%E5%A6%82%E4%BD%95%E5%86%8D%E5%A1%91%E5%AD%A6%E7%94%9F%E7%9A%84%E7%94%9F%E5%91%BD" tabindex="-1">教师如何再塑学生的生命</h3>
<h3 id="%E5%B0%91%E5%B9%B4%E7%9A%84%E4%B8%89%E8%A7%82%E5%A1%91%E9%80%A0" tabindex="-1">少年的三观塑造</h3>
<h3 id="%E5%A6%82%E4%BD%95%E7%90%86%E8%A7%A3%E5%BA%94%E8%AF%95%E6%95%99%E8%82%B2" tabindex="-1">如何理解应试教育</h3>
<h3 id="%E7%90%86%E6%83%B3%E7%9A%84%E5%B8%88%E7%94%9F%E5%85%B3%E7%B3%BB" tabindex="-1">理想的师生关系</h3>
<h3 id="%E6%95%99%E8%82%B2%E4%BA%8B%E4%B8%9A%E4%B8%8E%E8%82%B2%E4%BA%BA%E6%83%85%E6%80%80%E7%9A%84%E4%BC%A0%E6%89%BF" tabindex="-1">教育事业与育人情怀的传承</h3>
<h3 id="%E4%BC%A0%E7%BB%9F%E5%B8%88%E5%BE%B7%E7%9A%84%E5%91%BC%E5%94%A4" tabindex="-1">传统师德的呼唤</h3>
<p>就像我们总说“外行人谈内行事时总是不可避免地浪漫化”，这一点在《暗杀教室》里其实也有体现。作品的过度浪漫化不但体现在学生视角，同时也体现在教师的视角。杀老师无论作为一名监护人还是作为一名教师都过于强大过于万能，3年e班的孩子们无论作为后辈还是作为学生都过于乖巧过于聪颖，以致于很多现实中的教师所面对的困难都被理所当然地忽视掉了：教师有限的精力、工作业绩的压力、家庭的负担、有限的资源；学生客观上的厌学和资质平庸，即使在某方面有天分也不过是稍稍超出平均的、相比作品中“行行出状元”而言更加普遍的“毫无长处”，超出教师权限的学生所面对的原生家庭的伤害以及具备远超教师影响力的家长。这一切都导致虽然这是一部歌颂教师的作品，却终究因为不够“接地气”而可能很难获得现实中教师群体的共鸣。</p>
<p>更深层次地说，现代基础教育中，教育的标准化过程一直在消解传统师德的现实基础。教学的内容由考纲和教研组而不是教师确定，教学的质量根据应试教育的出题者和考试分数而不是学生的全面发展来评价，教育的手段受到学校制度的严格限制，教师的责任由现代法律而不是道德来界定。可以说，在我所听闻的范围内，国有体制单位中制度性的冷漠和不作为正在侵蚀人民教师，教师身上的光环正在被一点一点的剥夺，一些教师正在成为一种对上级而不是学生负责的“公务员”。我承认教育现代化在降低了受教育成本之余还保护了学生免遭个别教师的迫害，但也要面对现实：伴随着教育现代化，我们正离杀老师所展示的教师模范越来越远而不是越来越近。从这个角度讲，杀老师的形象之余现代基础教育甚至不构成批判（因为根本就没用共同的物质基础）而只能说是祝愿。</p>
<p>这是一个容不下“安丽·莎莉文”式再塑生命之人的时代。</p>
<h2 id="27%E4%BD%8D%E5%88%9D%E4%B8%AD%E5%B0%91%E5%B9%B4%E5%92%8C2%E4%BD%8D%E8%80%81%E5%B8%88%E7%9A%84%E7%B2%BE%E5%BD%A9%E7%BE%A4%E5%83%8F%E5%A1%91%E9%80%A0" tabindex="-1">27位初中少年和2位老师的精彩群像塑造</h2>
<h2 id="%E6%9D%80%E8%80%81%E5%B8%88%E2%80%94%E2%80%94%E8%BF%91%E4%B9%8E%E5%AE%8C%E7%BE%8E%E7%9A%84%E4%B8%BB%E8%A7%92" tabindex="-1">杀老师——近乎完美的主角</h2>
<p>如果说3年E班的师生出彩的群像让人难忘，那杀老师这位近乎完美的主角则让人惊艳。无论从人物身世动机、背景故事，还是人物性格的多层刻画、在剧情中的安排、声优的演出乃至结局都没有一丝一毫的马虎，是一种少年漫中足以让人铭记的出色主角。甚至可以说，那些略显苍白的剧情最后都为这位主角的塑造而服务了，而这位主角的光芒也很大程度上掩盖了剧情本身的不足。</p>
<h2 id="%E8%83%BD%E5%A4%9F%E8%87%AA%E5%9C%86%E5%85%B6%E8%AF%B4%E7%9A%84%E5%8A%A8%E6%9C%BA%E4%B8%8E%E8%83%8C%E6%99%AF" tabindex="-1">能够自圆其说的动机与背景</h2>
<p>身世动机而言</p>
<h2 id="%E7%90%86%E6%83%B3%E7%9A%84%E6%95%99%E5%B8%88%E5%BD%A2%E8%B1%A1" tabindex="-1">理想的教师形象</h2>
<p>相比相对单薄的身世背景，杀老师作为“超高速”教师几乎集合了所有作者心目中理想的教师品质，而在此前提下适当地安排了许多的缺陷和“人化”的塑造来避免杀老师成为一个单方面完美的“伟人”或者“伪人”形象。</p>
<h2 id="%E6%89%BF%E8%BD%BD%E4%BD%9C%E5%93%81%E7%AB%8B%E6%84%8F%E3%80%81%E6%83%85%E6%80%80%E4%B8%8E%E4%BB%B7%E5%80%BC%E8%A7%82" tabindex="-1">承载作品立意、情怀与价值观</h2>
<p>作者借“杀老师”这个形象重点阐述了这样几个问题：“理想的教师是怎样的”，“理想的教育是怎样的”，“教师的教育是如何影响学生的一生的”，“当今社会环境下少年需要怎样的三观，怎样引导这样的三观”、“如何理解应试教育”、“理想的师生关系是怎样的”，“教育事业与教师情怀是如何传承的”，以及最后两集所揭示的、可说是本作独到深刻的视角：教师与学生的相遇本身对双方都是珍贵的缘分；学生本身就是教师个人价值实现的集中体现，对那些传道授业的“师者”而言学生甚至可以说是教师生命的延续；教育的崇高与伟大体现在好的教师足以拯救失足的少年、能治愈少年的伤痕，能庇佑人类的未来。</p>
<p>就“教育的崇高与伟大体现在好的教师足以拯救失足的少年、能治愈少年的伤痕，能庇佑人类的未来”这一点，说这部作品是《放牛班的春天》《乡村教师》的精神续作也毫不为过。除去作为噱头的“暗杀”，故事主题架构几乎就是二次元版的《放牛班的春天》：一位伟大的老师来到一个由“被放弃的孩子”构成的吊车尾班级中，用自己博大的胸襟包容了少年们的种种不为人知不被理解的烦恼与痛楚，温和地引导每一位少年走向自己的未来。甚至连“暗杀”也可以类比为《放牛班》中合唱这样需要孩子们齐心协力完成的共同目标。</p>
<p>而选择一位满手鲜血之后因痛失爱人而接棒的、第一次当老师的杀手作为这部以教师与育人为题材的作品的主角是一个不落俗套且最终深化了主题的决策。杀老师曾是杀手，后又称为老师，本身就是对标题《暗杀教室》的巧妙呼应，而最终决战对阵自己放弃的唯一的学生，回扣主题的同时也借由对比强调了3年e班的成功。当然，更重要的无疑是这一班的学生事实上是对这位身负杀孽人生绝望的可恨可怜人的救赎。不仅是一群被放弃的孩子在老师这儿重塑了人生，老师的人生也最终被这群孩子拯救了。本来前往这个班级担任班主任只是因为爱人的遗愿，这种执念与《天龙八部》中阿朱托付乔峰照顾阿紫后乔峰对阿紫的执念一样。但在故事的最终一战中，孩子们对于杀老师而言早已超出“爱人托付之人”这一层面，孩子们的成长和敬爱是一位时日无多、爱人离世、了无生趣之人的人生意义的重新发现和人生价值的实现，这一点上与《钢之炼金术师》结局霍恩海姆终其30年在故土湮灭、爱人离世而失去人生意义之际重新寻回了人生目标的情节的精神是一致的。杀老师“你们不是累赘而是宝物”的告白以及最后点名时刻的闪回也因此像霍恩海姆的“我居然还想活下去，我真实无可救药”一样令人动容。杀老师因轻视教育而遭到背叛，最终却因为拥抱教育而得到救赎，这一优雅的前后呼应也是本作结局让人满意的原因之一。</p>
<h2 id="%E4%BB%8E%E6%BC%94%E6%8A%80%E5%88%B0%E9%9F%B3%E8%89%B2%E9%83%BD%E6%98%AF%E6%BB%A1%E5%88%86%E7%9A%84%E5%A3%B0%E4%BC%98%E6%BC%94%E5%87%BA" tabindex="-1">从演技到音色都是满分的声优演出</h2>
<p>声优表演方面，本作几乎可说是福山润的集大成之作，个人认为但就表演而言是福山润的最高峰，经此一役，这把自《叛逆的鲁鲁修》其广受关注的华丽男声完成了蜕变，彻底坐实了其实力派的身份。</p>
<p>为了演好这个身世复杂的多面角色，声优在一个人身上使用了多种迥异的声线来塑造人物，每一种声线也在保持音色一致的前提下做出了相当有层次的演出。在主线的大部分时候，塑造杀老师班主任形象采用的都使用了较尖锐扁平的音色。而杀老师本身就是一个同时具备轻蔑、授课、好色、欣慰、沉稳鼓励、担心、暴怒、幸福等多张脸谱的复杂角色。福山润在每一张脸谱的表演上都无可挑剔。无论是轻蔑好色幸福的脸谱下天然呆的调皮感与冒失感，暴怒失望时的粗声低吼，还是授业引导学生时波澜不惊温文尔雅的沉稳质感，以及欣慰、幸福时通透的散漫满足感，甚至于“你们不是累赘而是赠礼”真情告白的嘶吼之竭诚，都一一展露。杀老师作为一个将死之人的平凡、怯懦与小确幸以及相对应的作为一个教师于三尺讲台之上传道授业的浪漫与崇高都因福山润的表演而增色。</p>
<p>而在前传部分中福山润回归了他引以为傲的华丽青年男声，恣意炫耀着他天赐的华美音色。作为职业杀手的洒脱、傲慢、冷漠、对爱人的温柔都蕴含在这低沉而诱惑的嗓音当中。唯一的遗憾是前传部分的篇幅被大砍过，情感铺垫和渲染的不足导致在与爱人的对手戏中温柔爱意有余而失去恋人的痛楚不足。但这很难说是福山润的问题，篇幅有限导致爱人之死篇章的画面张力本身就不足，声优再进一步放大情绪的结果只能是不贴画面、让人感觉用力过猛。</p>
<p>总的来说，福山润在刻画这位超出常规却占据极大篇幅的主角时的声音演出没有是几乎完美的，他完美通过了角色对音色和演技的双重考验，与松冈祯丞（《刀剑神域》《Re0》《游戏人生》《落第骑士英雄谭》）、户松遥（《刀剑神域》《人渣的本愿》《Darling in the Franxx》）、泽城美雪（《化物语》《野良神》《丹特丽安的书架》《明日方舟》《原神》）、宫野真守（《死亡笔记》《命运石之门》《佐贺偶像是传奇》《阴晴不定大哥哥》）乃至山口胜平（《犬夜叉》《死亡笔记》《海贼王》）等一线演技派在同一水平线上了。</p>
<h2 id="%E5%85%B6%E4%BB%96%E7%A2%8E%E7%A2%8E%E5%BF%B5%E5%92%8C%E5%90%90%E6%A7%BD" tabindex="-1">其他碎碎念和吐槽</h2>
<ul>
<li>
<p>封杀《暗杀教室》的黑色幽默</p>
<p>于我而言，《暗杀教室》的封杀是对当代中国动画审核制度的巨大讽刺：这是一部日本动画中少有的、从内核到形式都致力于教化引导青少年的动画作品，它对校园生活的反映远比那些没有被封杀的天马行空的校园恋爱动画来得真实而让人共鸣，却因为它标新立异的噱头而彻底被封杀。</p>
<p>平心而论，这部作品采取了迎合少年人的简化浪漫化的世界观，可以说为了避免不良的导向已经很刻意地将一些尖锐的现实矛盾略过了，刻意到一定程度上破坏了故事本身的自洽。这样一部可以说为青少年量身定做的动画作品竟先于那些内核上乏善可陈推崇上力量之上、毫无情怀毫无教育意义，形式上剧情模板化人物脸谱化毫无笑点一味地通过刺激青少年失控的自我意识来制造爽点的“厕纸”异世界轻改被禁止，文化产品审核制度的失灵可见一斑。</p>
</li>
<li>
<p>严谨到几乎刻板的伏笔与回收缺乏惊喜</p>
<p>虽然设定经不起推敲，世界观过分简化和理想化，但剧情的前后呼应，伏笔的设立和回收其实都做得很好。但就是前后呼应得“太好了”，以至于对于我这种观众来说相对缺乏惊喜。事实上当看到渚在知道孤儿院的孩子的时候，我就已经猜到最后他会选择当老师。原因有二：渚擅长体察他人情绪和状态，这是基础教育中不可多得的能力；渚是学生中与杀老师私交最深入的，从后文会看，这位具有杀手天赋的少年与杀老师是注定的，何况杀老师还参与化解了原生家庭的伤痕，而我们常说“受老师影响最深的学生往往最后也会成为老师”。</p>
<p>而杀老师的身世背景乃至结局更是好猜。早在第一季制作组就暗示了杀老师最致命的弱点恰恰是这群孩子，杀老师从最开始就毫无厌世反人类倾向的举措、抓紧时间了结心愿的迫切感所暗示的“临终感”，乃至荒诞不经的“暗杀教室”设定本身就已经暗示了杀老师最后的结局一定是在彻底完成故人嘱托放下执念之后在孩子们面前引颈受戮。一个意图灭世的超自然生物来到这个教室画地为牢，关于自己的弱点对政府三缄其口却对孩子们毫无保留，与其说是杀老师“有机会”被孩子们暗杀，不如说杀老师“只允许”孩子们来动这个手。</p>
<p>所有的后续剧情几乎能从前文伏笔推导，伏笔的设立与回收的一丝不苟可见一斑，但正是这样才让剧情少了些惊喜，核心悬念事实上缺乏吸引力。制作组这样的选择在确凿地表面了烂尾的同时也锁死了自己的天花板，让剧情只能输是一个“普通的故事”。</p>
<p>对比就可见《命运石之门》的高明：《命》很好地利用了观众的潜意识而不是意识来铺设伏笔构建悬念。《命》第一集意义不明的混乱情节虽然削弱了观众继续探究的热情，但正因其足够“混乱”而让观众忘记了它们。即便《命》12集怒涛展开也并不能立即解开第1集的谜题，12集之后回溯撤消D-mail的过程一边深入设定、一边深化人物、一边推动剧情、同时还让这些支线拖延了观众对第1集解谜的注意力，而事实上伴随着回溯，编剧已经实在和观众的思维赛跑了。当观众接近真相时，剧情的矛盾也相应地推到了最高潮，此时我作为观众所体验到的是前所未有的穿透大脑的震撼。其中诀窍其实是：当观众集齐线索串起前文时，还未来得及做好心理准备就要直面真相，直面已不可挽回的结局。但《暗》的伏笔过于浅显易读，以致于我在到达结局之前已经有了心理准本。好在结局篇留足了篇幅，镜头序列、画面张力、人物对白在情绪的渲染起到了巨大的作用，实现了“我明知它的结局是刻意让人哭的但我最后还是哭了”的效果。这又一次说明对于文学作品，讲好一个故事比讲一个好故事也许更重要。</p>
</li>
</ul>
<h2 id="%E7%BB%93%E8%AF%AD%EF%BC%9A%E2%80%9C%E6%9D%80%E2%80%9D%E6%98%AF%E7%9B%B4%E9%9D%A2%E5%9B%B0%E9%9A%BE%E7%9A%84%E5%8B%87%E6%B0%94%EF%BC%8C%E2%80%9C%E6%9A%97%E6%9D%80%E6%95%99%E5%AE%A4%E2%80%9D%E6%98%AF%E6%8E%88%E4%B8%9A%E6%A0%91%E4%BA%BA%E7%9A%84%E6%A1%83%E8%8A%B1%E6%BA%90" tabindex="-1">结语：“杀”是直面困难的勇气，“暗杀教室”是授业树人的桃花源</h2>
<p>我仍然认为“杀”其实主要是博人眼球的噱头，通过非常标新立异的设题和破题来吸引观众，而且事实上这样的设题很明显有着周刊漫画出于商业原因单方面猎奇而不考虑后续发展的痕迹，这也是《暗杀教室》第一季评分一般的主要原因——作者自己都没想好怎么圆这么扯淡的设定。如果从表面上理解“暗杀”，那孩子们对老师的仰慕和信赖与中断老师生命的“暗杀”之间存在不可调停的矛盾，任何在这一层面上的联系都是牵强附会的；而如果从“杀老师就是来了解自己的心愿的，孩子们都是以不可能伤害到老师为前提去练习暗杀的”，那第一季的剧情就是彻头彻尾的过家家，这种过度娱乐化的设定对严肃的内核表达和情绪调动的影响都是毁灭性的。总得来说就是如果不深入“暗杀”本身，“暗杀”是彻底的败笔。</p>
<p>但就纵观整部作品，作者终于还是在自己行文表达的过程中找到了对“暗杀”的最好的诠释。《暗杀教室》确实应该以“孩子们杀不掉杀老师”为前提才具有自洽的故事逻辑，但“暗杀”本身并不是过家家，在这个语境下它可以被替换为这些词：挑战、击败、超越、面对。为了“暗杀”，孩子们参加训练锻炼身体；有了“暗杀”，孩子们斗志昂扬，在学习中力争上游；因为“暗杀”，孩子们懂得了“锤炼第二把刀”；为了“暗杀”，孩子们学会了团结一致相互协作。最后也是最重要的，是经历了“暗杀”，孩子们获得了直面困难直面惨淡人生的勇气。最后一条是“暗杀”在现实语境中的落地。回想一下，那些张嘴闭嘴“宰了你”的烂人，那些口蜜腹剑的小人其实就是生活中可能在某一天夺走你生活的敌人，它们确实没打算杀害你，但如果能拿出“暗杀”的勇气去回击，我们是否能少一些自杀的悲剧，少一些任人宰割的好人，多一些抗争到底的魄力，多一些保护自己的勇气。</p>
<p>从这个角度看，暗杀教室是关于德才兼备素质全面的教育理想的桃花源。在这个桃花源里，学生都是可塑之才，都是愿意跟随老师步伐去发展自己的孩子；老师是无所不能的仙人，他通晓全部的学科，在授业上能对每一个学生因材施教，在培育学生品行上倾注心血鼓励孩子们挑战权威超越老师，以博大的胸襟包容孩子们的冒犯和个性；学校和体制是理想的形态，拥有无穷无尽的资源来帮助孩子们，在这里应试教育和素质发展是不相冲突甚至互相促进的，应试教育在这里只是客观评价和促进孩子们的知识发展的手段而不是目的，孩子们都是能够兼顾考试、锻炼、个人才能和品行修养的天才。</p>
<p>奇妙的是，每当看到这一现实中不可能存在的暗杀教室，我常常会想起我的中小学的老师和同学们，热泪盈眶。这也许就是“虽不能至，心向往之”吧。</p>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/53d716a7/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/53d716a7/" class="post-title-link" itemprop="url">随笔：p进数与丢番图方程</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-07-06 03:01:28" itemprop="dateCreated datePublished" datetime="2023-07-06T03:01:28+08:00">2023-07-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-09 01:07:00" itemprop="dateModified" datetime="2024-10-09T01:07:00+08:00">2024-10-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E5%AD%A6/" itemprop="url" rel="index"><span itemprop="name">数学</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="p%E8%BF%9B%E6%95%B0" tabindex="-1">p进数</h2>
<ul>
<li>
<p>区别于<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">b</span></span></span></span></eq>进阶，考虑所谓的<em>b进数</em>，也即形如这样向右边无限延申的“10进数”：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>…</mo><mn>857142857143</mn></mrow><annotation encoding="application/x-tex">
  \dots 857142857143
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">857142857143</span></span></span></span></span></eqn></section><p>看起来是无限循环小数，只不过是向高有效位延展。</p>
<p>对10进数应用通常的加法乘法法则可知上式表示的是<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mn>7</mn></mrow><annotation encoding="application/x-tex">1/7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1/7</span></span></span></span></eq>：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>…</mo><mn>857142857143</mn><mo>×</mo><mn>7</mn><mo>=</mo><mo>…</mo><mn>0000000</mn></mrow><annotation encoding="application/x-tex">
    \dots 857142857143 \times 7 = \dots 0000000
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">857142857143</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">7</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">0000000</span></span></span></span></span></eqn></section><p>此外还可以有：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mo>…</mo><mn>999999999</mn><mo>=</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">
    \dots 999999999 = -1
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord">999999999</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></span></eqn></section><p>相比拥有无限循环的小数位，尽管无限多位的数看起来扯淡（至少看起来不是实数），但它确实可以在良定义的前提下<em>唯一表示所有有理数</em></p>
</li>
<li>
<p><strong>p进数</strong>：现代代数的基本工具之一</p>
<p>如果试图在一般的多项式方程中使用10进数会造成问题：10进数构成的群存在零因子（回忆：存在零因子就是存在若干非0元素的乘积为0），这源于10是合数。</p>
<p>因此，现代代数中使用的是<em>p进数</em>，其中<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></eq>是质数。可以证明，此时p进数构成整环。</p>
<p>p进数作为现代数学工具，已经产生了十余个菲尔兹奖</p>
</li>
</ul>
<h2 id="%E4%B8%A2%E7%95%AA%E5%9B%BE%E6%96%B9%E7%A8%8B" tabindex="-1">丢番图方程</h2>
<ul>
<li>
<p>丢番图方程关注“整系数的多项式方程的整数/有理数解”，类似费马大定理中的<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mi>n</mi></msup><mo>+</mo><msup><mi>y</mi><mi>n</mi></msup><mo>=</mo><msup><mi>z</mi><mi>n</mi></msup></mrow><annotation encoding="application/x-tex">x^n + y^n = z^n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8588em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6644em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.04398em;">z</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span></span></span></eq>就是一种特殊情况。</p>
</li>
<li>
<p>将p进数看作一个数列的无穷求和，比如一个3进数<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span></span></span></span></eq>可以看作：</p>
<section><eqn><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>x</mi><mo>=</mo><msub><mi>a</mi><mn>0</mn></msub><mo>+</mo><msub><mi>a</mi><mn>1</mn></msub><msup><mn>3</mn><mn>1</mn></msup><mo>+</mo><msub><mi>a</mi><mn>2</mn></msub><msup><mn>3</mn><mn>2</mn></msup><mo>+</mo><mo>⋯</mo><mo>+</mo><msub><mi>a</mi><mi>n</mi></msub><msup><mn>3</mn><mi>n</mi></msup><mo>+</mo><mo>⋯</mo></mrow><annotation encoding="application/x-tex">
    x = a_0 + a_1 3^1 + a_2 3^2 + \cdots + a_n3^n + \cdots
  </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">x</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.0141em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8641em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="minner">⋯</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8644em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">3</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7144em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.313em;"></span><span class="minner">⋯</span></span></span></span></span></eqn></section><p>这里数列<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><msub><mi>a</mi><mi>n</mi></msub><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{a_n\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">}</span></span></span></span></eq>其实就是前面出现过的“向高位无穷延展的数字”的一种更严谨的表示。</p>
<p>不能简单地将这个“无穷求和”看作级数。因为级数要求收敛，但这一求和通常并不收敛。</p>
</li>
<li>
<p>p进数在丢番图方程中的一个应用是借助看最后”几位数字是否吻合“这样的朴素的解决整数问题的思想来筛选可能的解。</p>
<ul>
<li>比如方程<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mn>2</mn></msup><mo>+</mo><msup><mi>x</mi><mn>4</mn></msup><mo>+</mo><msup><mi>x</mi><mn>8</mn></msup><mo>=</mo><msup><mi>y</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">x^2 + x^4 + x^8 = y^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">4</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">8</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.0085em;vertical-align:-0.1944em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></eq>的有理数解。我们只要同时将左右两边展开为3进数，然后令左右两边“每一位的数字都相等”就可以找到一些有理数解。</li>
<li>事实上，逐位匹配的做法会导出无穷组线性同余方程。只要一组一组的求解就可以最终得到所有的3进数形式的解<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(x,y)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathnormal">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">y</span><span class="mclose">)</span></span></span></span></eq>。这些解对应的恰恰是有理数解</li>
</ul>
</li>
</ul>
<h2 id="%E4%B8%8E%E5%AF%86%E7%A0%81%E5%AD%A6" tabindex="-1">与密码学</h2>
<ul>
<li>p进数的工具暗示了为何密码学和编码理论中扩展域（比如<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mi>F</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mi>n</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">GF(2^n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">GF</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></eq>）的运算最后总是变成<em>模意义下的某种多项式运算</em>。这些运算背后其实就是导出其结果的理论p进数所留下的痕迹</li>
</ul>
<h2 id="%E5%85%B3%E4%BA%8Ep%E8%BF%9B%E6%95%B0%E7%9A%84%E6%9B%B4%E5%A4%9A" tabindex="-1">关于p进数的更多</h2>
<ul>
<li>p进数的几何直观不同于实数的数轴，而是类似于<em>分形几何</em></li>
<li><em>p进数表示的数不总是实数</em>；有理数是实数集与p进数的交集</li>
<li>p进数远比实数稀疏</li>
<li>怀尔斯证明费马大定理的时候首先使用的是3进数，后续发现做不出来，然后切换到了5进数就解决了。事实上，大部分需要p进数的问题使用3进数就可以解决，但如果不行，可能需要其他的p；每个不同的<eq><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">p</span></span></span></span></eq>会给出完全不相关的数系，不同的p可能应用于不同的问题。</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/959e6a0d/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/959e6a0d/" class="post-title-link" itemprop="url">现代计算机的分区与卷</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-23 05:27:23" itemprop="dateCreated datePublished" datetime="2023-06-23T05:27:23+08:00">2023-06-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-09 01:07:00" itemprop="dateModified" datetime="2024-10-09T01:07:00+08:00">2024-10-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>在装机实践中，分区是先于文件系统（常见于“格式化”这一操作）和操作系统而存在的概念</li>
<li>分区和卷的故事
<ul>
<li>无论是磁带还是磁盘还是SSD，它们都提供了逻辑上线性的寻址空间（LBA）和物理上也大体顺序的存储结构</li>
<li>而早期实践中将一整块磁盘分割为多个“存储上连续、逻辑上独立的虚拟磁盘”是外存管理的普遍需求，从而有了分区</li>
<li>硬盘上的分区是一些<em>存储上连续、逻辑上独立的虚拟硬盘</em>。所谓存储上连续是指同一分区上的存储空间占据连续的外存地址空间，且磁盘和SSD的结构又决定了连续的地址通常意味着相邻的物理存储区域，从而<br>
可以用一块连续的外存来模拟一个独立的硬盘</li>
<li>分区的实现：<em>分区表</em>
<ul>
<li>分区是逻辑上的划分，它的实现是基于一组叫做“分布表”的数据，分区表记录了各个分区占据的地址范围以及分区的一些信息</li>
<li>分区之所以可以独立于OS和文件系统存在是因为现代PC中<em>依据一定协议将分区表写在磁盘的特定扇区上</em>，并且各类系统软件也遵循相关的协议读取分区表来使用硬盘
<ul>
<li>回忆：扇区是硬盘的最小存取单位</li>
</ul>
</li>
<li>使用分区表的分区机制跟使用FAT表/索引表的文件系统的区别：
<ul>
<li>分区表结构非常简单，线性划分之后连续分配，它管理的单位“分区”</li>
<li>文件系统的构造更复杂，往往需要兼顾读取、分配、容错等多种性能的同时提供多种功能，管理的最小粒度或者说管理对象是“文件”</li>
</ul>
</li>
</ul>
</li>
<li>分区和文件系统是某种意义上的包含关系：<em>不同分区上可以构建不同的文件系统</em>
<ul>
<li>具体来说，文件系统需要将整块外存整理为适当数据结构进行管理；而分区表将硬盘划分为多个逻辑硬盘，因此每个逻辑硬盘就可以有自己的文件系统</li>
</ul>
</li>
<li><strong>卷是逻辑上独立的硬盘，是卷的推广</strong>
<ul>
<li>一个“存储卷”不要求在物理上连续，它甚至可以是分布式的或者冗余的。一个存储卷只需要是一个由单个文件系统统一管理的、具有线性逻辑地址空间的“逻辑硬盘”即可</li>
<li>“卷”最显而易见的好处是用于磁盘阵列，也即RAID友好
<ul>
<li>RAID中有些是将数据按条带分散到不同物理磁盘驱动器上的，有些是冗余备份的。此时将一个逻辑上一体的RAID存储阵列看作一个卷，就可以作为一种对上层软件友好的抽象被使用，而不必接入冗余存储、分片存储之类的物理存储细节。现有文件系统也由此可以建立在这样的抽象之上</li>
</ul>
</li>
<li>在Windows环境下，如果不涉及RAID，卷和分区往往是可以混用的；而严谨地说，一个分区总是至少可以相当于一个卷</li>
</ul>
</li>
</ul>
</li>
<li>分区在装机中非常重要的根本原因是<em>OS通常需要占据一个分区</em>，对应Windows就是C盘。这在重装系统时带来好处：只需要丢弃一个分区的数据即可，不必格式化整块硬盘。
<ul>
<li>OS对分区这一对象的依赖导致我们不能放弃这个底层概念将全部虚拟硬盘问题归结为“存储卷”的抽象</li>
</ul>
</li>
<li>GHOST能够完全克隆一块磁盘的原理就在于它能备份“分区表”，这意味着GHOST可以将同一块物理硬盘上的多个分区全部备份下来且能恢复到另一块磁盘上。这是一般备份软件做不到的，因为分区表位于文件系统的下层，基于文件系统的所有操作对于分区表通常都是无感知，从而常规的磁盘备份的单位就成了“分区”</li>
<li>Linux系统独特的“挂载”
<ul>
<li>对于分区，Windows采取的是暴露这一细节不做抽象，将不同的分区区分为不同的“盘”，并使用盘符来标识</li>
<li>Linux系统中，包括硬盘、分区在内的所有物理/逻辑设备具有统一的“设备”抽象，并具有统一的接口。“挂载”这一操作可以将某一分区挂载到特定的目录上面
<ul>
<li>这里存在鸡生蛋蛋生鸡的问题：明明分区先于文件系统，将一个分区“挂载”在一个文件系统的目录上是干嘛——因此Linux总是需要一个“根”文件系统，这个文件系统在某种意义上说是“自省”的，从而将各种具有不同文件系统的分区挂载到某个目录上，并为用户在不同文件系统上的访问提供统一的“文件系统视图”</li>
</ul>
</li>
</ul>
</li>
<li>分区表“协议”：MBR &amp; GPT
<ul>
<li>（待完善）</li>
</ul>
</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://pumpkinjimmy.github.io/posts/24cdadee/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="BBPumpkin">
      <meta itemprop="description" content="BBPumpkin的个人博客( •̀ ω •́ )y">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="BBPumpkin的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/posts/24cdadee/" class="post-title-link" itemprop="url">随笔：在A55远古平台上安装Kodi受苦</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-22 15:58:39" itemprop="dateCreated datePublished" datetime="2023-06-22T15:58:39+08:00">2023-06-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-10-09 01:07:00" itemprop="dateModified" datetime="2024-10-09T01:07:00+08:00">2024-10-09</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <ul>
<li>最初走AndroidTV x86：搞不定Google账号什么的弃疗</li>
<li>然后走Windows + Kodi</li>
<li>最初直接Windows10，但直接报错GUI创建失败
<ul>
<li>发现是核显还没打驱动</li>
<li>由于过于古老，A55对应的A6处理器的核显驱动<em>没有Windows10的版本了</em></li>
</ul>
</li>
<li>然后转战Windows7（自动无视Win8），发现核显驱动是可以了，轮到Win7自己过于古老导致掉驱动了
<ul>
<li>先装一手系统补丁</li>
<li>然后噩梦开始：网卡掉驱动</li>
<li>查半天网卡型号，然后官网下载驱动</li>
<li>打完驱动发现错误代码52：驱动没有签名或者驱动损坏</li>
<li>又设置了半天组策略之类的保证无签名也能过，还是错误代码52，遂弃疗转战Ubuntu</li>
</ul>
</li>
<li>AMD官网查一手，发现核显驱动最高到14.04，所以装一手14.04</li>
<li>网卡驱动正常，核显驱动好像自带了，梦幻开局</li>
<li>然而，配置好Kodi软件源之后才发现：没有支持14.04的预编译版了，遂尝试<em>源码编译</em>安装
<ul>
<li>抛开一堆前置不说，CMake构建好像还是蛮简单的，前置也多数可以直接apt get</li>
<li>然而，CMake构建的时候发现不对劲：最低要3.12的CMake，但14.04上最新的居然是他妈2.28</li>
<li>再看一眼，最新版Kodi需要C++17的编译器，比如GCC7+，然后发现apt get安装的GCC是GCC 4、</li>
<li>然后就寄了：我他妈连GCC自己都需要自举编译才能到GCC7，更别说这些依赖全部都要源码编译，毁灭吧赶紧的</li>
</ul>
</li>
<li>至此，彻底绝望
<ul>
<li>太新的系统没有核显驱动</li>
<li>太旧的系统编译不了Kodi</li>
</ul>
</li>
<li>最后的曙光
<ul>
<li>重装Win7，想办法多整点驱动，把网卡驱动的问题搞定（毕竟Ubuntu14.04的系统都能轻松适配这种大路货的网卡）（考虑整点非官方镜像？大不了把捆绑的垃圾手动卸载了）</li>
<li>退到旧版本的Kodi上，似乎本来Ubuntu应用市场上就有Kodi的</li>
</ul>
</li>
</ul>
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/markdown-it-texmath/css/texmath.min.css">

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/18/">18</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">BBPumpkin</p>
  <div class="site-description" itemprop="description">BBPumpkin的个人博客( •̀ ω •́ )y</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">171</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">51</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/PumpkinJimmy" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;PumpkinJimmy" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">BBPumpkin</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
